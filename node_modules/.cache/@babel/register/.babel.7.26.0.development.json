{"{\"assumptions\":{},\"sourceRoot\":\"/alx-files_manager/tests/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/alx-files_manager\",\"filename\":\"/alx-files_manager/tests/dbClient.test.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/alx-files_manager\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$3\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$4\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$5\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$6\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$7\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$8\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$9\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$10\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$11\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$12\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$16\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$17\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.0:development":{"value":{"code":"\"use strict\";\n\nvar _chai = require(\"chai\");\nvar _db = _interopRequireDefault(require(\"../utils/db.js\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\ndescribe('dbClient', () => {\n  it('should be connected to MongoDB', done => {\n    _db.default.client.on('connect', () => {\n      (0, _chai.expect)(_db.default.isAlive()).to.equal(true);\n      done();\n    });\n  });\n  it('should count documents in users collection', async () => {\n    const nbUsers = await _db.default.nbUsers();\n    (0, _chai.expect)(nbUsers).to.be.a('number');\n  });\n  it('should count documents in files collection', async () => {\n    const nbFiles = await _db.default.nbFiles();\n    (0, _chai.expect)(nbFiles).to.be.a('number');\n  });\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfY2hhaSIsInJlcXVpcmUiLCJfZGIiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwiZSIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiZGVzY3JpYmUiLCJpdCIsImRvbmUiLCJkYkNsaWVudCIsImNsaWVudCIsIm9uIiwiZXhwZWN0IiwiaXNBbGl2ZSIsInRvIiwiZXF1YWwiLCJuYlVzZXJzIiwiYmUiLCJhIiwibmJGaWxlcyJdLCJzb3VyY2VSb290IjoiL2FseC1maWxlc19tYW5hZ2VyL3Rlc3RzLyIsInNvdXJjZXMiOlsiZGJDbGllbnQudGVzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBleHBlY3QgfSBmcm9tICdjaGFpJztcbmltcG9ydCBkYkNsaWVudCBmcm9tICcuLi91dGlscy9kYi5qcyc7XG5cbmRlc2NyaWJlKCdkYkNsaWVudCcsICgpID0+IHtcbiAgaXQoJ3Nob3VsZCBiZSBjb25uZWN0ZWQgdG8gTW9uZ29EQicsIChkb25lKSA9PiB7XG4gICAgZGJDbGllbnQuY2xpZW50Lm9uKCdjb25uZWN0JywgKCkgPT4ge1xuICAgICAgZXhwZWN0KGRiQ2xpZW50LmlzQWxpdmUoKSkudG8uZXF1YWwodHJ1ZSk7XG4gICAgICBkb25lKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgY291bnQgZG9jdW1lbnRzIGluIHVzZXJzIGNvbGxlY3Rpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgbmJVc2VycyA9IGF3YWl0IGRiQ2xpZW50Lm5iVXNlcnMoKTtcbiAgICBleHBlY3QobmJVc2VycykudG8uYmUuYSgnbnVtYmVyJyk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgY291bnQgZG9jdW1lbnRzIGluIGZpbGVzIGNvbGxlY3Rpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgbmJGaWxlcyA9IGF3YWl0IGRiQ2xpZW50Lm5iRmlsZXMoKTtcbiAgICBleHBlY3QobmJGaWxlcykudG8uYmUuYSgnbnVtYmVyJyk7XG4gIH0pO1xufSk7XG4iXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBQUEsS0FBQSxHQUFBQyxPQUFBO0FBQ0EsSUFBQUMsR0FBQSxHQUFBQyxzQkFBQSxDQUFBRixPQUFBO0FBQXNDLFNBQUFFLHVCQUFBQyxDQUFBLFdBQUFBLENBQUEsSUFBQUEsQ0FBQSxDQUFBQyxVQUFBLEdBQUFELENBQUEsS0FBQUUsT0FBQSxFQUFBRixDQUFBO0FBRXRDRyxRQUFRLENBQUMsVUFBVSxFQUFFLE1BQU07RUFDekJDLEVBQUUsQ0FBQyxnQ0FBZ0MsRUFBR0MsSUFBSSxJQUFLO0lBQzdDQyxXQUFRLENBQUNDLE1BQU0sQ0FBQ0MsRUFBRSxDQUFDLFNBQVMsRUFBRSxNQUFNO01BQ2xDLElBQUFDLFlBQU0sRUFBQ0gsV0FBUSxDQUFDSSxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUNDLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDLElBQUksQ0FBQztNQUN6Q1AsSUFBSSxDQUFDLENBQUM7SUFDUixDQUFDLENBQUM7RUFDSixDQUFDLENBQUM7RUFFRkQsRUFBRSxDQUFDLDRDQUE0QyxFQUFFLFlBQVk7SUFDM0QsTUFBTVMsT0FBTyxHQUFHLE1BQU1QLFdBQVEsQ0FBQ08sT0FBTyxDQUFDLENBQUM7SUFDeEMsSUFBQUosWUFBTSxFQUFDSSxPQUFPLENBQUMsQ0FBQ0YsRUFBRSxDQUFDRyxFQUFFLENBQUNDLENBQUMsQ0FBQyxRQUFRLENBQUM7RUFDbkMsQ0FBQyxDQUFDO0VBRUZYLEVBQUUsQ0FBQyw0Q0FBNEMsRUFBRSxZQUFZO0lBQzNELE1BQU1ZLE9BQU8sR0FBRyxNQUFNVixXQUFRLENBQUNVLE9BQU8sQ0FBQyxDQUFDO0lBQ3hDLElBQUFQLFlBQU0sRUFBQ08sT0FBTyxDQUFDLENBQUNMLEVBQUUsQ0FBQ0csRUFBRSxDQUFDQyxDQUFDLENBQUMsUUFBUSxDQUFDO0VBQ25DLENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["_chai","require","_db","_interopRequireDefault","e","__esModule","default","describe","it","done","dbClient","client","on","expect","isAlive","to","equal","nbUsers","be","a","nbFiles"],"sourceRoot":"/alx-files_manager/tests/","sources":["dbClient.test.js"],"sourcesContent":["import { expect } from 'chai';\nimport dbClient from '../utils/db.js';\n\ndescribe('dbClient', () => {\n  it('should be connected to MongoDB', (done) => {\n    dbClient.client.on('connect', () => {\n      expect(dbClient.isAlive()).to.equal(true);\n      done();\n    });\n  });\n\n  it('should count documents in users collection', async () => {\n    const nbUsers = await dbClient.nbUsers();\n    expect(nbUsers).to.be.a('number');\n  });\n\n  it('should count documents in files collection', async () => {\n    const nbFiles = await dbClient.nbFiles();\n    expect(nbFiles).to.be.a('number');\n  });\n});\n"],"mappings":";;AAAA,IAAAA,KAAA,GAAAC,OAAA;AACA,IAAAC,GAAA,GAAAC,sBAAA,CAAAF,OAAA;AAAsC,SAAAE,uBAAAC,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAEtCG,QAAQ,CAAC,UAAU,EAAE,MAAM;EACzBC,EAAE,CAAC,gCAAgC,EAAGC,IAAI,IAAK;IAC7CC,WAAQ,CAACC,MAAM,CAACC,EAAE,CAAC,SAAS,EAAE,MAAM;MAClC,IAAAC,YAAM,EAACH,WAAQ,CAACI,OAAO,CAAC,CAAC,CAAC,CAACC,EAAE,CAACC,KAAK,CAAC,IAAI,CAAC;MACzCP,IAAI,CAAC,CAAC;IACR,CAAC,CAAC;EACJ,CAAC,CAAC;EAEFD,EAAE,CAAC,4CAA4C,EAAE,YAAY;IAC3D,MAAMS,OAAO,GAAG,MAAMP,WAAQ,CAACO,OAAO,CAAC,CAAC;IACxC,IAAAJ,YAAM,EAACI,OAAO,CAAC,CAACF,EAAE,CAACG,EAAE,CAACC,CAAC,CAAC,QAAQ,CAAC;EACnC,CAAC,CAAC;EAEFX,EAAE,CAAC,4CAA4C,EAAE,YAAY;IAC3D,MAAMY,OAAO,GAAG,MAAMV,WAAQ,CAACU,OAAO,CAAC,CAAC;IACxC,IAAAP,YAAM,EAACO,OAAO,CAAC,CAACL,EAAE,CAACG,EAAE,CAACC,CAAC,CAAC,QAAQ,CAAC;EACnC,CAAC,CAAC;AACJ,CAAC,CAAC","ignoreList":[]}},"mtime":1733728693210},"{\"assumptions\":{},\"sourceRoot\":\"/alx-files_manager/utils/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/alx-files_manager\",\"filename\":\"/alx-files_manager/utils/db.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/alx-files_manager\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$3\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$4\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$5\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$12\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$16\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$17\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _mongodb = require(\"mongodb\");\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\n// Load environment variables from .env file\n_dotenv.default.config();\nclass DBClient {\n  constructor() {\n    const host = process.env.DB_HOST || 'localhost';\n    const port = process.env.DB_PORT || 27017;\n    const database = process.env.DB_DATABASE || 'files_manager';\n    const url = `mongodb://${host}:${port}`;\n    this.client = new _mongodb.MongoClient(url, {\n      useUnifiedTopology: true\n    });\n    this.connected = false;\n    this.client.connect(err => {\n      if (err) {\n        console.error('MongoDB connection error:', err);\n      } else {\n        this.connected = true;\n        this.db = this.client.db(database);\n      }\n    });\n  }\n  isAlive() {\n    return this.connected;\n  }\n  async nbUsers() {\n    if (!this.connected) return 0;\n    try {\n      return await this.db.collection('users').countDocuments();\n    } catch (err) {\n      console.error('Error counting users:', err);\n      return 0;\n    }\n  }\n  async nbFiles() {\n    if (!this.connected) return 0;\n    try {\n      return await this.db.collection('files').countDocuments();\n    } catch (err) {\n      console.error('Error counting files:', err);\n      return 0;\n    }\n  }\n}\nconst dbClient = new DBClient();\nvar _default = exports.default = dbClient;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbW9uZ29kYiIsInJlcXVpcmUiLCJfZG90ZW52IiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsImUiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsImRvdGVudiIsImNvbmZpZyIsIkRCQ2xpZW50IiwiY29uc3RydWN0b3IiLCJob3N0IiwicHJvY2VzcyIsImVudiIsIkRCX0hPU1QiLCJwb3J0IiwiREJfUE9SVCIsImRhdGFiYXNlIiwiREJfREFUQUJBU0UiLCJ1cmwiLCJjbGllbnQiLCJNb25nb0NsaWVudCIsInVzZVVuaWZpZWRUb3BvbG9neSIsImNvbm5lY3RlZCIsImNvbm5lY3QiLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJkYiIsImlzQWxpdmUiLCJuYlVzZXJzIiwiY29sbGVjdGlvbiIsImNvdW50RG9jdW1lbnRzIiwibmJGaWxlcyIsImRiQ2xpZW50IiwiX2RlZmF1bHQiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvYWx4LWZpbGVzX21hbmFnZXIvdXRpbHMvIiwic291cmNlcyI6WyJkYi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBNb25nb0NsaWVudCB9IGZyb20gJ21vbmdvZGInO1xuaW1wb3J0IGRvdGVudiBmcm9tICdkb3RlbnYnO1xuXG4vLyBMb2FkIGVudmlyb25tZW50IHZhcmlhYmxlcyBmcm9tIC5lbnYgZmlsZVxuZG90ZW52LmNvbmZpZygpO1xuXG5jbGFzcyBEQkNsaWVudCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIGNvbnN0IGhvc3QgPSBwcm9jZXNzLmVudi5EQl9IT1NUIHx8ICdsb2NhbGhvc3QnO1xuICAgIGNvbnN0IHBvcnQgPSBwcm9jZXNzLmVudi5EQl9QT1JUIHx8IDI3MDE3O1xuICAgIGNvbnN0IGRhdGFiYXNlID0gcHJvY2Vzcy5lbnYuREJfREFUQUJBU0UgfHwgJ2ZpbGVzX21hbmFnZXInO1xuICAgIGNvbnN0IHVybCA9IGBtb25nb2RiOi8vJHtob3N0fToke3BvcnR9YDtcbiAgICB0aGlzLmNsaWVudCA9IG5ldyBNb25nb0NsaWVudCh1cmwsIHsgdXNlVW5pZmllZFRvcG9sb2d5OiB0cnVlIH0pO1xuICAgIHRoaXMuY29ubmVjdGVkID0gZmFsc2U7XG5cbiAgICB0aGlzLmNsaWVudC5jb25uZWN0KChlcnIpID0+IHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignTW9uZ29EQiBjb25uZWN0aW9uIGVycm9yOicsIGVycik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmNvbm5lY3RlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuZGIgPSB0aGlzLmNsaWVudC5kYihkYXRhYmFzZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBpc0FsaXZlKCkge1xuICAgIHJldHVybiB0aGlzLmNvbm5lY3RlZDtcbiAgfVxuXG4gIGFzeW5jIG5iVXNlcnMoKSB7XG4gICAgaWYgKCF0aGlzLmNvbm5lY3RlZCkgcmV0dXJuIDA7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLmRiLmNvbGxlY3Rpb24oJ3VzZXJzJykuY291bnREb2N1bWVudHMoKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNvdW50aW5nIHVzZXJzOicsIGVycik7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG4gIH1cblxuICBhc3luYyBuYkZpbGVzKCkge1xuICAgIGlmICghdGhpcy5jb25uZWN0ZWQpIHJldHVybiAwO1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5kYi5jb2xsZWN0aW9uKCdmaWxlcycpLmNvdW50RG9jdW1lbnRzKCk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjb3VudGluZyBmaWxlczonLCBlcnIpO1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICB9XG59XG5cbmNvbnN0IGRiQ2xpZW50ID0gbmV3IERCQ2xpZW50KCk7XG5leHBvcnQgZGVmYXVsdCBkYkNs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","map":{"version":3,"names":["_mongodb","require","_dotenv","_interopRequireDefault","e","__esModule","default","dotenv","config","DBClient","constructor","host","process","env","DB_HOST","port","DB_PORT","database","DB_DATABASE","url","client","MongoClient","useUnifiedTopology","connected","connect","err","console","error","db","isAlive","nbUsers","collection","countDocuments","nbFiles","dbClient","_default","exports"],"sourceRoot":"/alx-files_manager/utils/","sources":["db.js"],"sourcesContent":["import { MongoClient } from 'mongodb';\nimport dotenv from 'dotenv';\n\n// Load environment variables from .env file\ndotenv.config();\n\nclass DBClient {\n  constructor() {\n    const host = process.env.DB_HOST || 'localhost';\n    const port = process.env.DB_PORT || 27017;\n    const database = process.env.DB_DATABASE || 'files_manager';\n    const url = `mongodb://${host}:${port}`;\n    this.client = new MongoClient(url, { useUnifiedTopology: true });\n    this.connected = false;\n\n    this.client.connect((err) => {\n      if (err) {\n        console.error('MongoDB connection error:', err);\n      } else {\n        this.connected = true;\n        this.db = this.client.db(database);\n      }\n    });\n  }\n\n  isAlive() {\n    return this.connected;\n  }\n\n  async nbUsers() {\n    if (!this.connected) return 0;\n    try {\n      return await this.db.collection('users').countDocuments();\n    } catch (err) {\n      console.error('Error counting users:', err);\n      return 0;\n    }\n  }\n\n  async nbFiles() {\n    if (!this.connected) return 0;\n    try {\n      return await this.db.collection('files').countDocuments();\n    } catch (err) {\n      console.error('Error counting files:', err);\n      return 0;\n    }\n  }\n}\n\nconst dbClient = new DBClient();\nexport default dbClient;\n"],"mappings":";;;;;;AAAA,IAAAA,QAAA,GAAAC,OAAA;AACA,IAAAC,OAAA,GAAAC,sBAAA,CAAAF,OAAA;AAA4B,SAAAE,uBAAAC,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAE5B;AACAG,eAAM,CAACC,MAAM,CAAC,CAAC;AAEf,MAAMC,QAAQ,CAAC;EACbC,WAAWA,CAAA,EAAG;IACZ,MAAMC,IAAI,GAAGC,OAAO,CAACC,GAAG,CAACC,OAAO,IAAI,WAAW;IAC/C,MAAMC,IAAI,GAAGH,OAAO,CAACC,GAAG,CAACG,OAAO,IAAI,KAAK;IACzC,MAAMC,QAAQ,GAAGL,OAAO,CAACC,GAAG,CAACK,WAAW,IAAI,eAAe;IAC3D,MAAMC,GAAG,GAAG,aAAaR,IAAI,IAAII,IAAI,EAAE;IACvC,IAAI,CAACK,MAAM,GAAG,IAAIC,oBAAW,CAACF,GAAG,EAAE;MAAEG,kBAAkB,EAAE;IAAK,CAAC,CAAC;IAChE,IAAI,CAACC,SAAS,GAAG,KAAK;IAEtB,IAAI,CAACH,MAAM,CAACI,OAAO,CAAEC,GAAG,IAAK;MAC3B,IAAIA,GAAG,EAAE;QACPC,OAAO,CAACC,KAAK,CAAC,2BAA2B,EAAEF,GAAG,CAAC;MACjD,CAAC,MAAM;QACL,IAAI,CAACF,SAAS,GAAG,IAAI;QACrB,IAAI,CAACK,EAAE,GAAG,IAAI,CAACR,MAAM,CAACQ,EAAE,CAACX,QAAQ,CAAC;MACpC;IACF,CAAC,CAAC;EACJ;EAEAY,OAAOA,CAAA,EAAG;IACR,OAAO,IAAI,CAACN,SAAS;EACvB;EAEA,MAAMO,OAAOA,CAAA,EAAG;IACd,IAAI,CAAC,IAAI,CAACP,SAAS,EAAE,OAAO,CAAC;IAC7B,IAAI;MACF,OAAO,MAAM,IAAI,CAACK,EAAE,CAACG,UAAU,CAAC,OAAO,CAAC,CAACC,cAAc,CAAC,CAAC;IAC3D,CAAC,CAAC,OAAOP,GAAG,EAAE;MACZC,OAAO,CAACC,KAAK,CAAC,uBAAuB,EAAEF,GAAG,CAAC;MAC3C,OAAO,CAAC;IACV;EACF;EAEA,MAAMQ,OAAOA,CAAA,EAAG;IACd,IAAI,CAAC,IAAI,CAACV,SAAS,EAAE,OAAO,CAAC;IAC7B,IAAI;MACF,OAAO,MAAM,IAAI,CAACK,EAAE,CAACG,UAAU,CAAC,OAAO,CAAC,CAACC,cAAc,CAAC,CAAC;IAC3D,CAAC,CAAC,OAAOP,GAAG,EAAE;MACZC,OAAO,CAACC,KAAK,CAAC,uBAAuB,EAAEF,GAAG,CAAC;MAC3C,OAAO,CAAC;IACV;EACF;AACF;AAEA,MAAMS,QAAQ,GAAG,IAAIzB,QAAQ,CAAC,CAAC;AAAC,IAAA0B,QAAA,GAAAC,OAAA,CAAA9B,OAAA,GACjB4B,QAAQ","ignoreList":[]}},"mtime":1733565115587},"{\"assumptions\":{},\"sourceRoot\":\"/alx-files_manager/tests/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/alx-files_manager\",\"filename\":\"/alx-files_manager/tests/endpoints.test.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/alx-files_manager\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$3\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$4\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$5\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$12\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$16\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$17\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.0:development":{"value":{"code":"\"use strict\";\n\nvar _chai = _interopRequireDefault(require(\"chai\"));\nvar _chaiHttp = _interopRequireDefault(require(\"chai-http\"));\nvar _server = _interopRequireDefault(require(\"../server.js\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\n// Assuming your express app is exported from server.js or a similar file\n\n_chai.default.use(_chaiHttp.default);\nconst {\n  expect\n} = _chai.default;\ndescribe('API Endpoints', () => {\n  it('GET /status should return status', done => {\n    _chai.default.request(_server.default).get('/status').end((err, res) => {\n      expect(res).to.have.status(200);\n      expect(res.body).to.have.property('redis');\n      expect(res.body).to.have.property('db');\n      done();\n    });\n  });\n  it('GET /stats should return stats', done => {\n    _chai.default.request(_server.default).get('/stats').end((err, res) => {\n      expect(res).to.have.status(200);\n      expect(res.body).to.have.property('users');\n      expect(res.body).to.have.property('files');\n      done();\n    });\n  });\n  it('POST /users should create a new user', done => {\n    _chai.default.request(_server.default).post('/users').send({\n      email: 'test@example.com',\n      password: 'password'\n    }).end((err, res) => {\n      expect(res).to.have.status(201);\n      expect(res.body).to.have.property('id');\n      expect(res.body).to.have.property('email');\n      done();\n    });\n  });\n  it('GET /connect should authenticate user', done => {\n    _chai.default.request(_server.default).get('/connect').auth('test@example.com', 'password').end((err, res) => {\n      expect(res).to.have.status(200);\n      expect(res.body).to.have.property('token');\n      done();\n    });\n  });\n  it('GET /disconnect should log out user', done => {\n    _chai.default.request(_server.default).get('/disconnect').set('X-Token', 'valid_token').end((err, res) => {\n      expect(res).to.have.status(204);\n      done();\n    });\n  });\n  it('GET /users/me should return user info', done => {\n    _chai.default.request(_server.default).get('/users/me').set('X-Token', 'valid_token').end((err, res) => {\n      expect(res).to.have.status(200);\n      expect(res.body).to.have.property('id');\n      expect(res.body).to.have.property('email');\n      done();\n    });\n  });\n  it('POST /files should upload a new file', done => {\n    _chai.default.request(_server.default).post('/files').set('X-Token', 'valid_token').send({\n      name: 'file.txt',\n      type: 'file',\n      data: 'Hello World'\n    }).end((err, res) => {\n      expect(res).to.have.status(201);\n      expect(res.body).to.have.property('id');\n      expect(res.body).to.have.property('name');\n      done();\n    });\n  });\n  it('GET /files/:id should return file info', done => {\n    _chai.default.request(_server.default).get('/files/5f1e8896c7ba06511e683b25').set('X-Token', 'valid_token').end((err, res) => {\n      expect(res).to.have.status(200);\n      expect(res.body).to.have.property('id');\n      expect(res.body).to.have.property('name');\n      done();\n    });\n  });\n  it('GET /files should return a list of files with pagination', done => {\n    _chai.default.request(_server.default).get('/files?parentId=0&page=0').set('X-Token', 'valid_token').end((err, res) => {\n      expect(res).to.have.status(200);\n      expect(res.body).to.be.an('array');\n      done();\n    });\n  });\n  it('PUT /files/:id/publish should publish the file', done => {\n    _chai.default.request(_server.default).put('/files/5f1e8896c7ba06511e683b25/publish').set('X-Token', 'valid_token').end((err, res) => {\n      expect(res).to.have.status(200);\n      expect(res.body).to.have.property('isPublic', true);\n      done();\n    });\n  });\n  it('PUT /files/:id/unpublish should unpublish the file', done => {\n    _chai.default.request(_server.default).put('/files/5f1e8896c7ba06511e683b25/unpublish').set('X-Token', 'valid_token').end((err, res) => {\n      expect(res).to.have.status(200);\n      expect(res.body).to.have.property('isPublic', false);\n      done();\n    });\n  });\n  it('GET /files/:id/data should return file data', done => {\n    _chai.default.request(_server.default).get('/files/5f1e8896c7ba06511e683b25/data').set('X-Token', 'valid_token').end((err, res) => {\n      expect(res).to.have.status(200);\n      expect(res).to.have.header('content-type', 'text/plain; charset=utf-8');\n      done();\n    });\n  });\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfY2hhaSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2NoYWlIdHRwIiwiX3NlcnZlciIsImUiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsImNoYWkiLCJ1c2UiLCJjaGFpSHR0cCIsImV4cGVjdCIsImRlc2NyaWJlIiwiaXQiLCJkb25lIiwicmVxdWVzdCIsImFwcCIsImdldCIsImVuZCIsImVyciIsInJlcyIsInRvIiwiaGF2ZSIsInN0YXR1cyIsImJvZHkiLCJwcm9wZXJ0eSIsInBvc3QiLCJzZW5kIiwiZW1haWwiLCJwYXNzd29yZCIsImF1dGgiLCJzZXQiLCJuYW1lIiwidHlwZSIsImRhdGEiLCJiZSIsImFuIiwicHV0IiwiaGVhZGVyIl0sInNvdXJjZVJvb3QiOiIvYWx4LWZpbGVzX21hbmFnZXIvdGVzdHMvIiwic291cmNlcyI6WyJlbmRwb2ludHMudGVzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY2hhaSBmcm9tICdjaGFpJztcbmltcG9ydCBjaGFpSHR0cCBmcm9tICdjaGFpLWh0dHAnO1xuaW1wb3J0IGFwcCBmcm9tICcuLi9zZXJ2ZXIuanMnOyAvLyBBc3N1bWluZyB5b3VyIGV4cHJlc3MgYXBwIGlzIGV4cG9ydGVkIGZyb20gc2VydmVyLmpzIG9yIGEgc2ltaWxhciBmaWxlXG5cbmNoYWkudXNlKGNoYWlIdHRwKTtcbmNvbnN0IHsgZXhwZWN0IH0gPSBjaGFpO1xuXG5kZXNjcmliZSgnQVBJIEVuZHBvaW50cycsICgpID0+IHtcbiAgaXQoJ0dFVCAvc3RhdHVzIHNob3VsZCByZXR1cm4gc3RhdHVzJywgKGRvbmUpID0+IHtcbiAgICBjaGFpLnJlcXVlc3QoYXBwKVxuICAgICAgLmdldCgnL3N0YXR1cycpXG4gICAgICAuZW5kKChlcnIsIHJlcykgPT4ge1xuICAgICAgICBleHBlY3QocmVzKS50by5oYXZlLnN0YXR1cygyMDApO1xuICAgICAgICBleHBlY3QocmVzLmJvZHkpLnRvLmhhdmUucHJvcGVydHkoJ3JlZGlzJyk7XG4gICAgICAgIGV4cGVjdChyZXMuYm9keSkudG8uaGF2ZS5wcm9wZXJ0eSgnZGInKTtcbiAgICAgICAgZG9uZSgpO1xuICAgICAgfSk7XG4gIH0pO1xuXG4gIGl0KCdHRVQgL3N0YXRzIHNob3VsZCByZXR1cm4gc3RhdHMnLCAoZG9uZSkgPT4ge1xuICAgIGNoYWkucmVxdWVzdChhcHApXG4gICAgICAuZ2V0KCcvc3RhdHMnKVxuICAgICAgLmVuZCgoZXJyLCByZXMpID0+IHtcbiAgICAgICAgZXhwZWN0KHJlcykudG8uaGF2ZS5zdGF0dXMoMjAwKTtcbiAgICAgICAgZXhwZWN0KHJlcy5ib2R5KS50by5oYXZlLnByb3BlcnR5KCd1c2VycycpO1xuICAgICAgICBleHBlY3QocmVzLmJvZHkpLnRvLmhhdmUucHJvcGVydHkoJ2ZpbGVzJyk7XG4gICAgICAgIGRvbmUoKTtcbiAgICAgIH0pO1xuICB9KTtcblxuICBpdCgnUE9TVCAvdXNlcnMgc2hvdWxkIGNyZWF0ZSBhIG5ldyB1c2VyJywgKGRvbmUpID0+IHtcbiAgICBjaGFpLnJlcXVlc3QoYXBwKVxuICAgICAgLnBvc3QoJy91c2VycycpXG4gICAgICAuc2VuZCh7IGVtYWlsOiAndGVzdEBleGFtcGxlLmNvbScsIHBhc3N3b3JkOiAncGFzc3dvcmQnIH0pXG4gICAgICAuZW5kKChlcnIsIHJlcykgPT4ge1xuICAgICAgICBleHBlY3QocmVzKS50by5oYXZlLnN0YXR1cygyMDEpO1xuICAgICAgICBleHBlY3QocmVzLmJvZHkpLnRvLmhhdmUucHJvcGVydHkoJ2lkJyk7XG4gICAgICAgIGV4cGVjdChyZXMuYm9keSkudG8uaGF2ZS5wcm9wZXJ0eSgnZW1haWwnKTtcbiAgICAgICAgZG9uZSgpO1xuICAgICAgfSk7XG4gIH0pO1xuXG4gIGl0KCdHRVQgL2Nvbm5lY3Qgc2hvdWxkIGF1dGhlbnRpY2F0ZSB1c2VyJywgKGRvbmUpID0+IHtcbiAgICBjaGFpLnJlcXVlc3QoYXBwKVxuICAgICAgLmdldCgnL2Nvbm5lY3QnKVxuICAgICAgLmF1dGgoJ3Rlc3RAZXhhbXBsZS5jb20nLCAncGFzc3dvcmQnKVxuICAgICAgLmVuZCgoZXJyLCByZXMpID0+IHtcbiAgICAgICAgZXhwZWN0KHJlcykudG8uaGF2ZS5zdGF0dXMoMjAwKTtcbiAgICAgICAgZXhwZWN0KHJlcy5ib2R5KS50by5oYXZlLnByb3BlcnR5KCd0b2tlbicpO1xuICAgICAgICBkb25lKCk7XG4gICAgICB9KTtcbiAgfSk7XG5cbiAgaXQoJ0dFVCAvZGlzY29ubmVjdCBzaG91bGQgbG9nIG91dCB1c2VyJywgKGRvbmUpID0+IHtcbiAgICBjaGFpLnJlcXVlc3QoYXBwKVxuICAgICAgLmdldCgnL2Rpc2Nvbm5lY3QnKVxuICAgICAgLnNldCgnWC1Ub2tlbicsICd2YWxpZF90b2tlbicpXG4gICAgICAuZW5kKChlcnIsIHJlcykgPT4ge1xuICAgICAgICBleHBlY3QocmVzKS50by5oYXZlLnN0YXR1cygyMDQpO1xuICAgICAgICBkb25lKCk7XG4gICAgICB9KTtcbiAgfSk7XG5cbiAgaXQoJ0dFVCAvdXNlcnMvbWUgc2hvdWxkIHJldHVybiB1c2VyIGluZm8nLCAoZG9uZSkgPT4ge1xuICAgIGNoYWkucmVxdWVzdChhcHApXG4gICAgICAuZ2V0KCcvdXNlcnMvbWUnKVxuICAgICAgLnNldCgnWC1Ub2tlbicsICd2YWxpZF90b2tlbicpXG4gICAgICAuZW5kKChlcnIsIHJlcykgPT4ge1xuICAgICAgICBleHBlY3QocmVzKS50by5oYXZlLnN0YXR1cygyMDApO1xuICAgICAgICBleHBlY3QocmVzLmJvZHkpLnRvLmhhdmUucHJvcGVydHkoJ2lkJyk7XG4gICAgICAgIGV4cGVjdChyZXMuYm9keSkudG8uaGF2ZS5wcm9wZXJ0eSgnZW1haWwnKTtcbiAgICAgICAgZG9uZSgpO1xuICAgICAgfSk7XG4gIH0pO1xuXG4gIGl0KCdQT1NUIC9maWxlcyBzaG91bGQgdXBsb2FkIGEgbmV3IGZpbGUnLCAoZG9uZSkgPT4ge1xuICAgIGNoYWkucmVxdWVzdChhcHApXG4gICAgICAucG9zdCgnL2ZpbGVzJylcbiAgICAgIC5zZXQoJ1gtVG9rZW4nLCAndmFsaWRfdG9rZW4nKVxuICAgICAgLnNlbmQoeyBuYW1lOiAnZmlsZS50eHQnLCB0eXBlOiAnZmlsZScsIGRhdGE6ICdIZWxsbyBXb3JsZCcgfSlcbiAgICAgIC5lbmQoKGVyciwgcmVzKSA9PiB7XG4gICAgICAgIGV4cGVjdChyZXMpLnRvLmhhdmUuc3RhdHVzKDIwMSk7XG4gICAgICAgIGV4cGVjdChyZXMuYm9keSkudG8uaGF2ZS5wcm9wZXJ0eSgnaWQnKTtcbiAgICAgICAgZXhwZWN0KHJlcy5ib2R5KS50by5oYXZlLnByb3BlcnR5KCduYW1lJyk7XG4gICAgICAgIGRvbmUoKTtcbiAgICAgIH0pO1xuICB9KTtcblxuICBpdCgnR0VUIC9maWxlcy86aWQgc2hvdWxkIHJldHVybiBmaWxlIGluZm8nLCAoZG9uZSkgPT4ge1xuICAgIGNoYWkucmVxdWVzdChhcHApXG4gICAgICAuZ2V0KCcvZmlsZXMvNWYxZTg4OTZjN2JhMDY1MTFlNjgzYjI1JylcbiAgICAgIC5zZXQoJ1gtVG9rZW4nLCAndmFsaWRfdG9rZW4nKVxuICAgICAgLmVuZCgoZXJyLCByZXMpID0+IHtcbiAgICAgICAgZXhwZWN0KHJlcykudG8uaGF2ZS5zdGF0dXMoMjAwKTtcbiAgICAgICAgZXhwZWN0KHJlcy5ib2R5KS50by5oYXZlLnByb3BlcnR5KCdpZCcpO1xuICAgICAgICBleHBlY3QocmVzLmJvZHkpLnRvLmhhdmUucHJvcGVydHkoJ25hbWUnKTtcbiAgICAgICAgZG9uZSgpO1xuICAgICAgfSk7XG4gIH0pO1xuXG4gIGl0KCdHRVQgL2ZpbGVzIHNob3VsZCByZXR1cm4gYSBsaXN0IG9mIGZpbGVzIHdpdGggcGFnaW5hdGlvbicsIChkb25lKSA9PiB7XG4gICAgY2hhaS5yZXF1ZXN0KGFwcClcbiAgICAgIC5nZXQoJy9maWxlcz9wYXJlbnRJZD0wJnBhZ2U9MCcpXG4gICAgICAuc2V0KCdYLVRva2VuJywgJ3ZhbGlkX3Rva2VuJylcbiAgICAgIC5lbmQoKGVyciwgcmVzKSA9PiB7XG4gICAgICAgIGV4cGVjdChyZXMpLnRvLmhhdmUuc3RhdHVzKDIwMCk7XG4gICAgICAgIGV4cGVjdChyZXMuYm9keSkudG8uYmUuYW4oJ2FycmF5Jyk7XG4gICAgICAgIGRvbmUoKTtcbiAgICAgIH0pO1xuICB9KTtcblxuICBpdCgnUFVUIC9maWxlcy86aWQvcHVibGlzaCBzaG91bGQgcHVibGlzaCB0aGUgZmlsZScsIChkb25lKSA9PiB7XG4gICAgY2hhaS5yZXF1ZXN0KGFwcClcbiAgICAgIC5wdXQoJy9maWxlcy81ZjFlODg5NmM3YmEwNjUxMWU2ODNiMjUvcHVibGlzaCcpXG4gICAgICAuc2V0KCdYLVRva2VuJywgJ3ZhbGlkX3Rva2VuJylcbiAgICAgIC5lbmQoKGVyciwgcmVzKSA9PiB7XG4gICAgICAgIGV4cGVjdChyZXMpLnRvLmhhdmUuc3RhdHVzKDIwMCk7XG4gICAgICAgIGV4cGVjdChyZXMuYm9keSkudG8uaGF2ZS5wcm9wZXJ0eSgnaXNQdWJsaWMnLCB0cnVlKTtcbiAgICAgICAgZG9uZSgpO1xuICAgICAgfSk7XG4gIH0pO1xuXG4gIGl0KCdQVVQgL2ZpbGVzLzppZC91bnB1Ymxpc2ggc2hvdWxkIHVucHVibGlzaCB0aGUgZmlsZScsIChkb25lKSA9PiB7XG4gICAgY2hhaS5yZXF1ZXN0KGFwcClcbiAgICAgIC5wdXQoJy9maWxlcy81ZjFlODg5NmM3YmEwNjUxMWU2ODNiMjUvdW5wdWJsaXNoJylcbiAgICAgIC5zZXQoJ1gtVG9rZW4nLCAndmFsaWRfdG9rZW4nKVxuICAgICAgLmVuZCgoZXJyLCByZXMpID0+IHtcbiAgICAgICAgZXhwZWN0KHJlcykudG8uaGF2ZS5zdGF0dXMoMjAwKTtcbiAgICAgICAgZXhwZWN0KHJlcy5ib2R5KS50by5oYXZlLnByb3BlcnR5KCdpc1B1YmxpYycsIGZhbHNlKTtcbiAgICAgICAgZG9uZSgpO1xuICAgICAgfSk7XG4gIH0pO1xuXG4gIGl0KCdHRVQgL2ZpbGVzLzppZC9kYXRhIHNob3VsZCByZXR1cm4gZmlsZSBkYXRhJywgKGRvbmUpID0+IHtcbiAgICBjaGFpLnJlcXVlc3QoYXBwKVxuICAgICAgLmdldCgnL2ZpbGVzLzVmMWU4ODk2YzdiYTA2NTExZTY4M2IyNS9kYXRhJylcbiAgICAgIC5zZXQoJ1gtVG9rZW4nLCAndmFsaWRfdG9rZW4nKVxuICAgICAgLmVuZCgoZXJyLCByZXMpID0+IHtcbiAgICAgICAgZXhwZWN0KHJlcykudG8uaGF2ZS5zdGF0dXMoMjAwKTtcbiAgICAgICAgZXhwZWN0KHJlcykudG8uaGF2ZS5oZWFkZXIoJ2NvbnRlbnQtdHlwZScsICd0ZXh0L3BsYWluOyBjaGFyc2V0PXV0Zi04Jyk7XG4gICAgICAgIGRvbmUoKTtcbiAgICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sIm1hcHBpbmdzIjoiOztBQUFBLElBQUFBLEtBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLFNBQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFFLE9BQUEsR0FBQUgsc0JBQUEsQ0FBQUMsT0FBQTtBQUErQixTQUFBRCx1QkFBQUksQ0FBQSxXQUFBQSxDQUFBLElBQUFBLENBQUEsQ0FBQUMsVUFBQSxHQUFBRCxDQUFBLEtBQUFFLE9BQUEsRUFBQUYsQ0FBQTtBQUFDOztBQUVoQ0csYUFBSSxDQUFDQyxHQUFHLENBQUNDLGlCQUFRLENBQUM7QUFDbEIsTUFBTTtFQUFFQztBQUFPLENBQUMsR0FBR0gsYUFBSTtBQUV2QkksUUFBUSxDQUFDLGVBQWUsRUFBRSxNQUFNO0VBQzlCQyxFQUFFLENBQUMsa0NBQWtDLEVBQUdDLElBQUksSUFBSztJQUMvQ04sYUFBSSxDQUFDTyxPQUFPLENBQUNDLGVBQUcsQ0FBQyxDQUNkQyxHQUFHLENBQUMsU0FBUyxDQUFDLENBQ2RDLEdBQUcsQ0FBQyxDQUFDQyxHQUFHLEVBQUVDLEdBQUcsS0FBSztNQUNqQlQsTUFBTSxDQUFDUyxHQUFHLENBQUMsQ0FBQ0MsRUFBRSxDQUFDQyxJQUFJLENBQUNDLE1BQU0sQ0FBQyxHQUFHLENBQUM7TUFDL0JaLE1BQU0sQ0FBQ1Ms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","map":{"version":3,"names":["_chai","_interopRequireDefault","require","_chaiHttp","_server","e","__esModule","default","chai","use","chaiHttp","expect","describe","it","done","request","app","get","end","err","res","to","have","status","body","property","post","send","email","password","auth","set","name","type","data","be","an","put","header"],"sourceRoot":"/alx-files_manager/tests/","sources":["endpoints.test.js"],"sourcesContent":["import chai from 'chai';\nimport chaiHttp from 'chai-http';\nimport app from '../server.js'; // Assuming your express app is exported from server.js or a similar file\n\nchai.use(chaiHttp);\nconst { expect } = chai;\n\ndescribe('API Endpoints', () => {\n  it('GET /status should return status', (done) => {\n    chai.request(app)\n      .get('/status')\n      .end((err, res) => {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property('redis');\n        expect(res.body).to.have.property('db');\n        done();\n      });\n  });\n\n  it('GET /stats should return stats', (done) => {\n    chai.request(app)\n      .get('/stats')\n      .end((err, res) => {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property('users');\n        expect(res.body).to.have.property('files');\n        done();\n      });\n  });\n\n  it('POST /users should create a new user', (done) => {\n    chai.request(app)\n      .post('/users')\n      .send({ email: 'test@example.com', password: 'password' })\n      .end((err, res) => {\n        expect(res).to.have.status(201);\n        expect(res.body).to.have.property('id');\n        expect(res.body).to.have.property('email');\n        done();\n      });\n  });\n\n  it('GET /connect should authenticate user', (done) => {\n    chai.request(app)\n      .get('/connect')\n      .auth('test@example.com', 'password')\n      .end((err, res) => {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property('token');\n        done();\n      });\n  });\n\n  it('GET /disconnect should log out user', (done) => {\n    chai.request(app)\n      .get('/disconnect')\n      .set('X-Token', 'valid_token')\n      .end((err, res) => {\n        expect(res).to.have.status(204);\n        done();\n      });\n  });\n\n  it('GET /users/me should return user info', (done) => {\n    chai.request(app)\n      .get('/users/me')\n      .set('X-Token', 'valid_token')\n      .end((err, res) => {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property('id');\n        expect(res.body).to.have.property('email');\n        done();\n      });\n  });\n\n  it('POST /files should upload a new file', (done) => {\n    chai.request(app)\n      .post('/files')\n      .set('X-Token', 'valid_token')\n      .send({ name: 'file.txt', type: 'file', data: 'Hello World' })\n      .end((err, res) => {\n        expect(res).to.have.status(201);\n        expect(res.body).to.have.property('id');\n        expect(res.body).to.have.property('name');\n        done();\n      });\n  });\n\n  it('GET /files/:id should return file info', (done) => {\n    chai.request(app)\n      .get('/files/5f1e8896c7ba06511e683b25')\n      .set('X-Token', 'valid_token')\n      .end((err, res) => {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property('id');\n        expect(res.body).to.have.property('name');\n        done();\n      });\n  });\n\n  it('GET /files should return a list of files with pagination', (done) => {\n    chai.request(app)\n      .get('/files?parentId=0&page=0')\n      .set('X-Token', 'valid_token')\n      .end((err, res) => {\n        expect(res).to.have.status(200);\n        expect(res.body).to.be.an('array');\n        done();\n      });\n  });\n\n  it('PUT /files/:id/publish should publish the file', (done) => {\n    chai.request(app)\n      .put('/files/5f1e8896c7ba06511e683b25/publish')\n      .set('X-Token', 'valid_token')\n      .end((err, res) => {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property('isPublic', true);\n        done();\n      });\n  });\n\n  it('PUT /files/:id/unpublish should unpublish the file', (done) => {\n    chai.request(app)\n      .put('/files/5f1e8896c7ba06511e683b25/unpublish')\n      .set('X-Token', 'valid_token')\n      .end((err, res) => {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property('isPublic', false);\n        done();\n      });\n  });\n\n  it('GET /files/:id/data should return file data', (done) => {\n    chai.request(app)\n      .get('/files/5f1e8896c7ba06511e683b25/data')\n      .set('X-Token', 'valid_token')\n      .end((err, res) => {\n        expect(res).to.have.status(200);\n        expect(res).to.have.header('content-type', 'text/plain; charset=utf-8');\n        done();\n      });\n  });\n});\n"],"mappings":"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","ignoreList":[]}},"mtime":1733728804894},"{\"assumptions\":{},\"sourceRoot\":\"/alx-files_manager/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/alx-files_manager\",\"filename\":\"/alx-files_manager/server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/alx-files_manager\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$3\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$4\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$5\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$12\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$16\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$17\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.0:development":{"value":{"code":"\"use strict\";\n\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\nvar _index = _interopRequireDefault(require(\"./routes/index.js\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\n// server.js\n\n// Load environment variables from .env file\n_dotenv.default.config();\nconst app = (0, _express.default)();\nconst port = process.env.PORT || 5000;\n\n// Load routes\napp.use('/', _index.default);\n\n// Start the server\napp.listen(port, () => {\n  console.log(`Server running on port ${port}`);\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2RvdGVudiIsIl9pbmRleCIsImUiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsImRvdGVudiIsImNvbmZpZyIsImFwcCIsImV4cHJlc3MiLCJwb3J0IiwicHJvY2VzcyIsImVudiIsIlBPUlQiLCJ1c2UiLCJyb3V0ZXMiLCJsaXN0ZW4iLCJjb25zb2xlIiwibG9nIl0sInNvdXJjZVJvb3QiOiIvYWx4LWZpbGVzX21hbmFnZXIvIiwic291cmNlcyI6WyJzZXJ2ZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc2VydmVyLmpzXG5pbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcbmltcG9ydCBkb3RlbnYgZnJvbSAnZG90ZW52JztcbmltcG9ydCByb3V0ZXMgZnJvbSAnLi9yb3V0ZXMvaW5kZXguanMnO1xuXG4vLyBMb2FkIGVudmlyb25tZW50IHZhcmlhYmxlcyBmcm9tIC5lbnYgZmlsZVxuZG90ZW52LmNvbmZpZygpO1xuXG5jb25zdCBhcHAgPSBleHByZXNzKCk7XG5jb25zdCBwb3J0ID0gcHJvY2Vzcy5lbnYuUE9SVCB8fCA1MDAwO1xuXG4vLyBMb2FkIHJvdXRlc1xuYXBwLnVzZSgnLycsIHJvdXRlcyk7XG5cbi8vIFN0YXJ0IHRoZSBzZXJ2ZXJcbmFwcC5saXN0ZW4ocG9ydCwgKCkgPT4ge1xuICBjb25zb2xlLmxvZyhgU2VydmVyIHJ1bm5pbmcgb24gcG9ydCAke3BvcnR9YCk7XG59KTtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFDQSxJQUFBQSxRQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxPQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRSxNQUFBLEdBQUFILHNCQUFBLENBQUFDLE9BQUE7QUFBdUMsU0FBQUQsdUJBQUFJLENBQUEsV0FBQUEsQ0FBQSxJQUFBQSxDQUFBLENBQUFDLFVBQUEsR0FBQUQsQ0FBQSxLQUFBRSxPQUFBLEVBQUFGLENBQUE7QUFIdkM7O0FBS0E7QUFDQUcsZUFBTSxDQUFDQyxNQUFNLENBQUMsQ0FBQztBQUVmLE1BQU1DLEdBQUcsR0FBRyxJQUFBQyxnQkFBTyxFQUFDLENBQUM7QUFDckIsTUFBTUMsSUFBSSxHQUFHQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsSUFBSSxJQUFJLElBQUk7O0FBRXJDO0FBQ0FMLEdBQUcsQ0FBQ00sR0FBRyxDQUFDLEdBQUcsRUFBRUMsY0FBTSxDQUFDOztBQUVwQjtBQUNBUCxHQUFHLENBQUNRLE1BQU0sQ0FBQ04sSUFBSSxFQUFFLE1BQU07RUFDckJPLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLDBCQUEwQlIsSUFBSSxFQUFFLENBQUM7QUFDL0MsQ0FBQyxDQUFDIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["_express","_interopRequireDefault","require","_dotenv","_index","e","__esModule","default","dotenv","config","app","express","port","process","env","PORT","use","routes","listen","console","log"],"sourceRoot":"/alx-files_manager/","sources":["server.js"],"sourcesContent":["// server.js\nimport express from 'express';\nimport dotenv from 'dotenv';\nimport routes from './routes/index.js';\n\n// Load environment variables from .env file\ndotenv.config();\n\nconst app = express();\nconst port = process.env.PORT || 5000;\n\n// Load routes\napp.use('/', routes);\n\n// Start the server\napp.listen(port, () => {\n  console.log(`Server running on port ${port}`);\n});\n"],"mappings":";;AACA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,OAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,MAAA,GAAAH,sBAAA,CAAAC,OAAA;AAAuC,SAAAD,uBAAAI,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAHvC;;AAKA;AACAG,eAAM,CAACC,MAAM,CAAC,CAAC;AAEf,MAAMC,GAAG,GAAG,IAAAC,gBAAO,EAAC,CAAC;AACrB,MAAMC,IAAI,GAAGC,OAAO,CAACC,GAAG,CAACC,IAAI,IAAI,IAAI;;AAErC;AACAL,GAAG,CAACM,GAAG,CAAC,GAAG,EAAEC,cAAM,CAAC;;AAEpB;AACAP,GAAG,CAACQ,MAAM,CAACN,IAAI,EAAE,MAAM;EACrBO,OAAO,CAACC,GAAG,CAAC,0BAA0BR,IAAI,EAAE,CAAC;AAC/C,CAAC,CAAC","ignoreList":[]}},"mtime":1733565415614},"{\"assumptions\":{},\"sourceRoot\":\"/alx-files_manager/routes/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/alx-files_manager\",\"filename\":\"/alx-files_manager/routes/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/alx-files_manager\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$3\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$4\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$5\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$12\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$16\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$17\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = require(\"express\");\nvar _AppController = _interopRequireDefault(require(\"../controllers/AppController.js\"));\nvar _UsersController = _interopRequireDefault(require(\"../controllers/UsersController.js\"));\nvar _AuthController = _interopRequireDefault(require(\"../controllers/AuthController.js\"));\nvar _FilesController = _interopRequireDefault(require(\"../controllers/FilesController.js\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\nconst router = (0, _express.Router)();\nrouter.get('/status', _AppController.default.getStatus);\nrouter.get('/stats', _AppController.default.getStats);\nrouter.post('/users', _UsersController.default.postNew);\nrouter.get('/connect', _AuthController.default.getConnect);\nrouter.get('/disconnect', _AuthController.default.getDisconnect);\nrouter.get('/users/me', _UsersController.default.getMe);\nrouter.post('/files', _FilesController.default.postUpload);\nrouter.get('/files/:id', _FilesController.default.getShow);\nrouter.get('/files', _FilesController.default.getIndex);\nrouter.put('/files/:id/publish', _FilesController.default.putPublish);\nrouter.put('/files/:id/unpublish', _FilesController.default.putUnpublish);\n\n// Add this line for the new endpoint\nrouter.get('/files/:id/data', _FilesController.default.getFile);\nvar _default = exports.default = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsInJlcXVpcmUiLCJfQXBwQ29udHJvbGxlciIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfVXNlcnNDb250cm9sbGVyIiwiX0F1dGhDb250cm9sbGVyIiwiX0ZpbGVzQ29udHJvbGxlciIsImUiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsInJvdXRlciIsIlJvdXRlciIsImdldCIsIkFwcENvbnRyb2xsZXIiLCJnZXRTdGF0dXMiLCJnZXRTdGF0cyIsInBvc3QiLCJVc2Vyc0NvbnRyb2xsZXIiLCJwb3N0TmV3IiwiQXV0aENvbnRyb2xsZXIiLCJnZXRDb25uZWN0IiwiZ2V0RGlzY29ubmVjdCIsImdldE1lIiwiRmlsZXNDb250cm9sbGVyIiwicG9zdFVwbG9hZCIsImdldFNob3ciLCJnZXRJbmRleCIsInB1dCIsInB1dFB1Ymxpc2giLCJwdXRVbnB1Ymxpc2giLCJnZXRGaWxlIiwiX2RlZmF1bHQiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvYWx4LWZpbGVzX21hbmFnZXIvcm91dGVzLyIsInNvdXJjZXMiOlsiaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUm91dGVyIH0gZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgQXBwQ29udHJvbGxlciBmcm9tICcuLi9jb250cm9sbGVycy9BcHBDb250cm9sbGVyLmpzJztcbmltcG9ydCBVc2Vyc0NvbnRyb2xsZXIgZnJvbSAnLi4vY29udHJvbGxlcnMvVXNlcnNDb250cm9sbGVyLmpzJztcbmltcG9ydCBBdXRoQ29udHJvbGxlciBmcm9tICcuLi9jb250cm9sbGVycy9BdXRoQ29udHJvbGxlci5qcyc7XG5pbXBvcnQgRmlsZXNDb250cm9sbGVyIGZyb20gJy4uL2NvbnRyb2xsZXJzL0ZpbGVzQ29udHJvbGxlci5qcyc7XG5cbmNvbnN0IHJvdXRlciA9IFJvdXRlcigpO1xuXG5yb3V0ZXIuZ2V0KCcvc3RhdHVzJywgQXBwQ29udHJvbGxlci5nZXRTdGF0dXMpO1xucm91dGVyLmdldCgnL3N0YXRzJywgQXBwQ29udHJvbGxlci5nZXRTdGF0cyk7XG5yb3V0ZXIucG9zdCgnL3VzZXJzJywgVXNlcnNDb250cm9sbGVyLnBvc3ROZXcpO1xucm91dGVyLmdldCgnL2Nvbm5lY3QnLCBBdXRoQ29udHJvbGxlci5nZXRDb25uZWN0KTtcbnJvdXRlci5nZXQoJy9kaXNjb25uZWN0JywgQXV0aENvbnRyb2xsZXIuZ2V0RGlzY29ubmVjdCk7XG5yb3V0ZXIuZ2V0KCcvdXNlcnMvbWUnLCBVc2Vyc0NvbnRyb2xsZXIuZ2V0TWUpO1xucm91dGVyLnBvc3QoJy9maWxlcycsIEZpbGVzQ29udHJvbGxlci5wb3N0VXBsb2FkKTtcbnJvdXRlci5nZXQoJy9maWxlcy86aWQnLCBGaWxlc0NvbnRyb2xsZXIuZ2V0U2hvdyk7XG5yb3V0ZXIuZ2V0KCcvZmlsZXMnLCBGaWxlc0NvbnRyb2xsZXIuZ2V0SW5kZXgpO1xucm91dGVyLnB1dCgnL2ZpbGVzLzppZC9wdWJsaXNoJywgRmlsZXNDb250cm9sbGVyLnB1dFB1Ymxpc2gpO1xucm91dGVyLnB1dCgnL2ZpbGVzLzppZC91bnB1Ymxpc2gnLCBGaWxlc0NvbnRyb2xsZXIucHV0VW5wdWJsaXNoKTtcblxuLy8gQWRkIHRoaXMgbGluZSBmb3IgdGhlIG5ldyBlbmRwb2ludFxucm91dGVyLmdldCgnL2ZpbGVzLzppZC9kYXRhJywgRmlsZXNDb250cm9sbGVyLmdldEZpbGUpO1xuXG5leHBvcnQgZGVmYXVsdCByb3V0ZXI7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLFFBQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLGNBQUEsR0FBQUMsc0JBQUEsQ0FBQUYsT0FBQTtBQUNBLElBQUFHLGdCQUFBLEdBQUFELHNCQUFBLENBQUFGLE9BQUE7QUFDQSxJQUFBSSxlQUFBLEdBQUFGLHNCQUFBLENBQUFGLE9BQUE7QUFDQSxJQUFBSyxnQkFBQSxHQUFBSCxzQkFBQSxDQUFBRixPQUFBO0FBQWdFLFNBQUFFLHVCQUFBSSxDQUFBLFdBQUFBLENBQUEsSUFBQUEsQ0FBQSxDQUFBQyxVQUFBLEdBQUFELENBQUEsS0FBQUUsT0FBQSxFQUFBRixDQUFBO0FBRWhFLE1BQU1HLE1BQU0sR0FBRyxJQUFBQyxlQUFNLEVBQUMsQ0FBQztBQUV2QkQsTUFBTSxDQUFDRSxHQUFHLENBQUMsU0FBUyxFQUFFQyxzQkFBYSxDQUFDQyxTQUFTLENBQUM7QUFDOUNKLE1BQU0sQ0FBQ0UsR0FBRyxDQUFDLFFBQVEsRUFBRUMsc0JBQWEsQ0FBQ0UsUUFBUSxDQUFDO0FBQzVDTCxNQUFNLENBQUNNLElBQUksQ0FBQyxRQUFRLEVBQUVDLHdCQUFlLENBQUNDLE9BQU8sQ0FBQztBQUM5Q1IsTUFBTSxDQUFDRSxHQUFHLENBQUMsVUFBVSxFQUFFTyx1QkFBYyxDQUFDQyxVQUFVLENBQUM7QUFDakRWLE1BQU0sQ0FBQ0UsR0FBRyxDQUFDLGFBQWEsRUFBRU8sdUJBQWMsQ0FBQ0UsYUFBYSxDQUFDO0FBQ3ZEWCxNQUFNLENBQUNFLEdBQUcsQ0FBQyxXQUFXLEVBQUVLLHdCQUFlLENBQUNLLEtBQUssQ0FBQztBQUM5Q1osTUFBTSxDQUFDTSxJQUFJLENBQUMsUUFBUSxFQUFFTyx3QkFBZSxDQUFDQyxVQUFVLENBQUM7QUFDakRkLE1BQU0sQ0FBQ0UsR0FBRyxDQUFDLFlBQVksRUFBRVcsd0JBQWUsQ0FBQ0UsT0FBTyxDQUFDO0FBQ2pEZixNQUFNLENBQUNFLEdBQUcsQ0FBQyxRQUFRLEVBQUVXLHdCQUFlLENBQUNHLFFBQVEsQ0FBQztBQUM5Q2hCLE1BQU0sQ0FBQ2lCLEdBQUcsQ0FBQyxvQkFBb0IsRUFBRUosd0JBQWUsQ0FBQ0ssVUFBVSxDQUFDO0FBQzVEbEIsTUFBTSxDQUFDaUIsR0FBRyxDQUFDLHNCQUFzQixFQUFFSix3QkFBZSxDQUFDTSxZQUFZLENBQUM7O0FBRWhFO0FBQ0FuQixNQUFNLENBQUNFLEdBQUcsQ0FBQyxpQkFBaUIsRUFBRVcsd0JBQWUsQ0FBQ08sT0FBTyxDQUFDO0FBQUMsSUFBQUMsUUFBQSxHQUFBQyxPQUFBLENBQUF2QixPQUFBLEdBRXhDQyxNQUFNIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["_express","require","_AppController","_interopRequireDefault","_UsersController","_AuthController","_FilesController","e","__esModule","default","router","Router","get","AppController","getStatus","getStats","post","UsersController","postNew","AuthController","getConnect","getDisconnect","getMe","FilesController","postUpload","getShow","getIndex","put","putPublish","putUnpublish","getFile","_default","exports"],"sourceRoot":"/alx-files_manager/routes/","sources":["index.js"],"sourcesContent":["import { Router } from 'express';\nimport AppController from '../controllers/AppController.js';\nimport UsersController from '../controllers/UsersController.js';\nimport AuthController from '../controllers/AuthController.js';\nimport FilesController from '../controllers/FilesController.js';\n\nconst router = Router();\n\nrouter.get('/status', AppController.getStatus);\nrouter.get('/stats', AppController.getStats);\nrouter.post('/users', UsersController.postNew);\nrouter.get('/connect', AuthController.getConnect);\nrouter.get('/disconnect', AuthController.getDisconnect);\nrouter.get('/users/me', UsersController.getMe);\nrouter.post('/files', FilesController.postUpload);\nrouter.get('/files/:id', FilesController.getShow);\nrouter.get('/files', FilesController.getIndex);\nrouter.put('/files/:id/publish', FilesController.putPublish);\nrouter.put('/files/:id/unpublish', FilesController.putUnpublish);\n\n// Add this line for the new endpoint\nrouter.get('/files/:id/data', FilesController.getFile);\n\nexport default router;\n"],"mappings":";;;;;;AAAA,IAAAA,QAAA,GAAAC,OAAA;AACA,IAAAC,cAAA,GAAAC,sBAAA,CAAAF,OAAA;AACA,IAAAG,gBAAA,GAAAD,sBAAA,CAAAF,OAAA;AACA,IAAAI,eAAA,GAAAF,sBAAA,CAAAF,OAAA;AACA,IAAAK,gBAAA,GAAAH,sBAAA,CAAAF,OAAA;AAAgE,SAAAE,uBAAAI,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAEhE,MAAMG,MAAM,GAAG,IAAAC,eAAM,EAAC,CAAC;AAEvBD,MAAM,CAACE,GAAG,CAAC,SAAS,EAAEC,sBAAa,CAACC,SAAS,CAAC;AAC9CJ,MAAM,CAACE,GAAG,CAAC,QAAQ,EAAEC,sBAAa,CAACE,QAAQ,CAAC;AAC5CL,MAAM,CAACM,IAAI,CAAC,QAAQ,EAAEC,wBAAe,CAACC,OAAO,CAAC;AAC9CR,MAAM,CAACE,GAAG,CAAC,UAAU,EAAEO,uBAAc,CAACC,UAAU,CAAC;AACjDV,MAAM,CAACE,GAAG,CAAC,aAAa,EAAEO,uBAAc,CAACE,aAAa,CAAC;AACvDX,MAAM,CAACE,GAAG,CAAC,WAAW,EAAEK,wBAAe,CAACK,KAAK,CAAC;AAC9CZ,MAAM,CAACM,IAAI,CAAC,QAAQ,EAAEO,wBAAe,CAACC,UAAU,CAAC;AACjDd,MAAM,CAACE,GAAG,CAAC,YAAY,EAAEW,wBAAe,CAACE,OAAO,CAAC;AACjDf,MAAM,CAACE,GAAG,CAAC,QAAQ,EAAEW,wBAAe,CAACG,QAAQ,CAAC;AAC9ChB,MAAM,CAACiB,GAAG,CAAC,oBAAoB,EAAEJ,wBAAe,CAACK,UAAU,CAAC;AAC5DlB,MAAM,CAACiB,GAAG,CAAC,sBAAsB,EAAEJ,wBAAe,CAACM,YAAY,CAAC;;AAEhE;AACAnB,MAAM,CAACE,GAAG,CAAC,iBAAiB,EAAEW,wBAAe,CAACO,OAAO,CAAC;AAAC,IAAAC,QAAA,GAAAC,OAAA,CAAAvB,OAAA,GAExCC,MAAM","ignoreList":[]}},"mtime":1733727160354},"{\"assumptions\":{},\"sourceRoot\":\"/alx-files_manager/controllers/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/alx-files_manager\",\"filename\":\"/alx-files_manager/controllers/AppController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/alx-files_manager\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$3\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$4\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$5\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$12\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$16\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$17\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _redis = _interopRequireDefault(require(\"../utils/redis.js\"));\nvar _db = _interopRequireDefault(require(\"../utils/db.js\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\n// controllers/AppController.js\n\nclass AppController {\n  static getStatus(req, res) {\n    res.status(200).json({\n      redis: _redis.default.isAlive(),\n      db: _db.default.isAlive()\n    });\n  }\n  static async getStats(req, res) {\n    const users = await _db.default.nbUsers();\n    const files = await _db.default.nbFiles();\n    res.status(200).json({\n      users,\n      files\n    });\n  }\n}\nvar _default = exports.default = AppController;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVkaXMiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9kYiIsImUiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIkFwcENvbnRyb2xsZXIiLCJnZXRTdGF0dXMiLCJyZXEiLCJyZXMiLCJzdGF0dXMiLCJqc29uIiwicmVkaXMiLCJyZWRpc0NsaWVudCIsImlzQWxpdmUiLCJkYiIsImRiQ2xpZW50IiwiZ2V0U3RhdHMiLCJ1c2VycyIsIm5iVXNlcnMiLCJmaWxlcyIsIm5iRmlsZXMiLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9hbHgtZmlsZXNfbWFuYWdlci9jb250cm9sbGVycy8iLCJzb3VyY2VzIjpbIkFwcENvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gY29udHJvbGxlcnMvQXBwQ29udHJvbGxlci5qc1xuaW1wb3J0IHJlZGlzQ2xpZW50IGZyb20gJy4uL3V0aWxzL3JlZGlzLmpzJztcbmltcG9ydCBkYkNsaWVudCBmcm9tICcuLi91dGlscy9kYi5qcyc7XG5cbmNsYXNzIEFwcENvbnRyb2xsZXIge1xuICBzdGF0aWMgZ2V0U3RhdHVzKHJlcSwgcmVzKSB7XG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyByZWRpczogcmVkaXNDbGllbnQuaXNBbGl2ZSgpLCBkYjogZGJDbGllbnQuaXNBbGl2ZSgpIH0pO1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIGdldFN0YXRzKHJlcSwgcmVzKSB7XG4gICAgY29uc3QgdXNlcnMgPSBhd2FpdCBkYkNsaWVudC5uYlVzZXJzKCk7XG4gICAgY29uc3QgZmlsZXMgPSBhd2FpdCBkYkNsaWVudC5uYkZpbGVzKCk7XG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyB1c2VycywgZmlsZXMgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQXBwQ29udHJvbGxlcjtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQ0EsSUFBQUEsTUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsR0FBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQXNDLFNBQUFELHVCQUFBRyxDQUFBLFdBQUFBLENBQUEsSUFBQUEsQ0FBQSxDQUFBQyxVQUFBLEdBQUFELENBQUEsS0FBQUUsT0FBQSxFQUFBRixDQUFBO0FBRnRDOztBQUlBLE1BQU1HLGFBQWEsQ0FBQztFQUNsQixPQUFPQyxTQUFTQSxDQUFDQyxHQUFHLEVBQUVDLEdBQUcsRUFBRTtJQUN6QkEsR0FBRyxDQUFDQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUFFQyxLQUFLLEVBQUVDLGNBQVcsQ0FBQ0MsT0FBTyxDQUFDLENBQUM7TUFBRUMsRUFBRSxFQUFFQyxXQUFRLENBQUNGLE9BQU8sQ0FBQztJQUFFLENBQUMsQ0FBQztFQUNoRjtFQUVBLGFBQWFHLFFBQVFBLENBQUNULEdBQUcsRUFBRUMsR0FBRyxFQUFFO0lBQzlCLE1BQU1TLEtBQUssR0FBRyxNQUFNRixXQUFRLENBQUNHLE9BQU8sQ0FBQyxDQUFDO0lBQ3RDLE1BQU1DLEtBQUssR0FBRyxNQUFNSixXQUFRLENBQUNLLE9BQU8sQ0FBQyxDQUFDO0lBQ3RDWixHQUFHLENBQUNDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQUVPLEtBQUs7TUFBRUU7SUFBTSxDQUFDLENBQUM7RUFDeEM7QUFDRjtBQUFDLElBQUFFLFFBQUEsR0FBQUMsT0FBQSxDQUFBbEIsT0FBQSxHQUVjQyxhQUFhIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["_redis","_interopRequireDefault","require","_db","e","__esModule","default","AppController","getStatus","req","res","status","json","redis","redisClient","isAlive","db","dbClient","getStats","users","nbUsers","files","nbFiles","_default","exports"],"sourceRoot":"/alx-files_manager/controllers/","sources":["AppController.js"],"sourcesContent":["// controllers/AppController.js\nimport redisClient from '../utils/redis.js';\nimport dbClient from '../utils/db.js';\n\nclass AppController {\n  static getStatus(req, res) {\n    res.status(200).json({ redis: redisClient.isAlive(), db: dbClient.isAlive() });\n  }\n\n  static async getStats(req, res) {\n    const users = await dbClient.nbUsers();\n    const files = await dbClient.nbFiles();\n    res.status(200).json({ users, files });\n  }\n}\n\nexport default AppController;\n"],"mappings":";;;;;;AACA,IAAAA,MAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,GAAA,GAAAF,sBAAA,CAAAC,OAAA;AAAsC,SAAAD,uBAAAG,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAFtC;;AAIA,MAAMG,aAAa,CAAC;EAClB,OAAOC,SAASA,CAACC,GAAG,EAAEC,GAAG,EAAE;IACzBA,GAAG,CAACC,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,KAAK,EAAEC,cAAW,CAACC,OAAO,CAAC,CAAC;MAAEC,EAAE,EAAEC,WAAQ,CAACF,OAAO,CAAC;IAAE,CAAC,CAAC;EAChF;EAEA,aAAaG,QAAQA,CAACT,GAAG,EAAEC,GAAG,EAAE;IAC9B,MAAMS,KAAK,GAAG,MAAMF,WAAQ,CAACG,OAAO,CAAC,CAAC;IACtC,MAAMC,KAAK,GAAG,MAAMJ,WAAQ,CAACK,OAAO,CAAC,CAAC;IACtCZ,GAAG,CAACC,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEO,KAAK;MAAEE;IAAM,CAAC,CAAC;EACxC;AACF;AAAC,IAAAE,QAAA,GAAAC,OAAA,CAAAlB,OAAA,GAEcC,aAAa","ignoreList":[]}},"mtime":1733565625134},"{\"assumptions\":{},\"sourceRoot\":\"/alx-files_manager/utils/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/alx-files_manager\",\"filename\":\"/alx-files_manager/utils/redis.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/alx-files_manager\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$3\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$4\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$5\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$12\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$16\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$17\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _redis = require(\"redis\");\nclass RedisClient {\n  constructor() {\n    this.client = (0, _redis.createClient)();\n    this.client.on('error', err => console.error('Redis client error:', err));\n    this.connected = false;\n    this.client.on('connect', () => {\n      console.log('Redis client connected');\n      this.connected = true;\n    });\n  }\n  isAlive() {\n    return this.connected;\n  }\n  async get(key) {\n    return new Promise((resolve, reject) => {\n      this.client.get(key, (err, value) => {\n        if (err) reject(err);\n        resolve(value);\n      });\n    });\n  }\n  async set(key, value, duration) {\n    return new Promise((resolve, reject) => {\n      this.client.set(key, value, 'EX', duration, err => {\n        if (err) reject(err);\n        resolve();\n      });\n    });\n  }\n  async del(key) {\n    return new Promise((resolve, reject) => {\n      this.client.del(key, err => {\n        if (err) reject(err);\n        resolve();\n      });\n    });\n  }\n}\nconst redisClient = new RedisClient();\nvar _default = exports.default = redisClient;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVkaXMiLCJyZXF1aXJlIiwiUmVkaXNDbGllbnQiLCJjb25zdHJ1Y3RvciIsImNsaWVudCIsImNyZWF0ZUNsaWVudCIsIm9uIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwiY29ubmVjdGVkIiwibG9nIiwiaXNBbGl2ZSIsImdldCIsImtleSIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwidmFsdWUiLCJzZXQiLCJkdXJhdGlvbiIsImRlbCIsInJlZGlzQ2xpZW50IiwiX2RlZmF1bHQiLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiL2FseC1maWxlc19tYW5hZ2VyL3V0aWxzLyIsInNvdXJjZXMiOlsicmVkaXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAncmVkaXMnO1xuXG5jbGFzcyBSZWRpc0NsaWVudCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuY2xpZW50ID0gY3JlYXRlQ2xpZW50KCk7XG4gICAgdGhpcy5jbGllbnQub24oJ2Vycm9yJywgKGVycikgPT4gY29uc29sZS5lcnJvcignUmVkaXMgY2xpZW50IGVycm9yOicsIGVycikpO1xuICAgIHRoaXMuY29ubmVjdGVkID0gZmFsc2U7XG4gICAgXG4gICAgdGhpcy5jbGllbnQub24oJ2Nvbm5lY3QnLCAoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnUmVkaXMgY2xpZW50IGNvbm5lY3RlZCcpO1xuICAgICAgdGhpcy5jb25uZWN0ZWQgPSB0cnVlO1xuICAgIH0pO1xuICB9XG5cbiAgaXNBbGl2ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5jb25uZWN0ZWQ7XG4gIH1cblxuICBhc3luYyBnZXQoa2V5KSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuY2xpZW50LmdldChrZXksIChlcnIsIHZhbHVlKSA9PiB7XG4gICAgICAgIGlmIChlcnIpIHJlamVjdChlcnIpO1xuICAgICAgICByZXNvbHZlKHZhbHVlKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgc2V0KGtleSwgdmFsdWUsIGR1cmF0aW9uKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuY2xpZW50LnNldChrZXksIHZhbHVlLCAnRVgnLCBkdXJhdGlvbiwgKGVycikgPT4ge1xuICAgICAgICBpZiAoZXJyKSByZWplY3QoZXJyKTtcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBkZWwoa2V5KSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuY2xpZW50LmRlbChrZXksIChlcnIpID0+IHtcbiAgICAgICAgaWYgKGVycikgcmVqZWN0KGVycik7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59XG5cbmNvbnN0IHJlZGlzQ2xpZW50ID0gbmV3IFJlZGlzQ2xpZW50KCk7XG5leHBvcnQgZGVmYXVsdCByZWRpc0NsaWVudDtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBQUEsTUFBQSxHQUFBQyxPQUFBO0FBRUEsTUFBTUMsV0FBVyxDQUFDO0VBQ2hCQyxXQUFXQSxDQUFBLEVBQUc7SUFDWixJQUFJLENBQUNDLE1BQU0sR0FBRyxJQUFBQyxtQkFBWSxFQUFDLENBQUM7SUFDNUIsSUFBSSxDQUFDRCxNQUFNLENBQUNFLEVBQUUsQ0FBQyxPQUFPLEVBQUdDLEdBQUcsSUFBS0MsT0FBTyxDQUFDQyxLQUFLLENBQUMscUJBQXFCLEVBQUVGLEdBQUcsQ0FBQyxDQUFDO0lBQzNFLElBQUksQ0FBQ0csU0FBUyxHQUFHLEtBQUs7SUFFdEIsSUFBSSxDQUFDTixNQUFNLENBQUNFLEVBQUUsQ0FBQyxTQUFTLEVBQUUsTUFBTTtNQUM5QkUsT0FBTyxDQUFDRyxHQUFHLENBQUMsd0JBQXdCLENBQUM7TUFDckMsSUFBSSxDQUFDRCxTQUFTLEdBQUcsSUFBSTtJQUN2QixDQUFDLENBQUM7RUFDSjtFQUVBRSxPQUFPQSxDQUFBLEVBQUc7SUFDUixPQUFPLElBQUksQ0FBQ0YsU0FBUztFQUN2QjtFQUVBLE1BQU1HLEdBQUdBLENBQUNDLEdBQUcsRUFBRTtJQUNiLE9BQU8sSUFBSUMsT0FBTyxDQUFDLENBQUNDLE9BQU8sRUFBRUMsTUFBTSxLQUFLO01BQ3RDLElBQUksQ0FBQ2IsTUFBTSxDQUFDUyxHQUFHLENBQUNDLEdBQUcsRUFBRSxDQUFDUCxHQUFHLEVBQUVXLEtBQUssS0FBSztRQUNuQyxJQUFJWCxHQUFHLEVBQUVVLE1BQU0sQ0FBQ1YsR0FBRyxDQUFDO1FBQ3BCUyxPQUFPLENBQUNFLEtBQUssQ0FBQztNQUNoQixDQUFDLENBQUM7SUFDSixDQUFDLENBQUM7RUFDSjtFQUVBLE1BQU1DLEdBQUdBLENBQUNMLEdBQUcsRUFBRUksS0FBSyxFQUFFRSxRQUFRLEVBQUU7SUFDOUIsT0FBTyxJQUFJTCxPQUFPLENBQUMsQ0FBQ0MsT0FBTyxFQUFFQyxNQUFNLEtBQUs7TUFDdEMsSUFBSSxDQUFDYixNQUFNLENBQUNlLEdBQUcsQ0FBQ0wsR0FBRyxFQUFFSSxLQUFLLEVBQUUsSUFBSSxFQUFFRSxRQUFRLEVBQUdiLEdBQUcsSUFBSztRQUNuRCxJQUFJQSxHQUFHLEVBQUVVLE1BQU0sQ0FBQ1YsR0FBRyxDQUFDO1FBQ3BCUyxPQUFPLENBQUMsQ0FBQztNQUNYLENBQUMsQ0FBQztJQUNKLENBQUMsQ0FBQztFQUNKO0VBRUEsTUFBTUssR0FBR0EsQ0FBQ1AsR0FBRyxFQUFFO0lBQ2IsT0FBTyxJQUFJQyxPQUFPLENBQUMsQ0FBQ0MsT0FBTyxFQUFFQyxNQUFNLEtBQUs7TUFDdEMsSUFBSSxDQUFDYixNQUFNLENBQUNpQixHQUFHLENBQUNQLEdBQUcsRUFBR1AsR0FBRyxJQUFLO1FBQzVCLElBQUlBLEdBQUcsRUFBRVUsTUFBTSxDQUFDVixHQUFHLENBQUM7UUFDcEJTLE9BQU8sQ0FBQyxDQUFDO01BQ1gsQ0FBQyxDQUFDO0lBQ0osQ0FBQyxDQUFDO0VBQ0o7QUFDRjtBQUVBLE1BQU1NLFdBQVcsR0FBRyxJQUFJcEIsV0FBVyxDQUFDLENBQUM7QUFBQyxJQUFBcUIsUUFBQSxHQUFBQyxPQUFBLENBQUFDLE9BQUEsR0FDdkJILFdBQVciLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["_redis","require","RedisClient","constructor","client","createClient","on","err","console","error","connected","log","isAlive","get","key","Promise","resolve","reject","value","set","duration","del","redisClient","_default","exports","default"],"sourceRoot":"/alx-files_manager/utils/","sources":["redis.js"],"sourcesContent":["import { createClient } from 'redis';\n\nclass RedisClient {\n  constructor() {\n    this.client = createClient();\n    this.client.on('error', (err) => console.error('Redis client error:', err));\n    this.connected = false;\n    \n    this.client.on('connect', () => {\n      console.log('Redis client connected');\n      this.connected = true;\n    });\n  }\n\n  isAlive() {\n    return this.connected;\n  }\n\n  async get(key) {\n    return new Promise((resolve, reject) => {\n      this.client.get(key, (err, value) => {\n        if (err) reject(err);\n        resolve(value);\n      });\n    });\n  }\n\n  async set(key, value, duration) {\n    return new Promise((resolve, reject) => {\n      this.client.set(key, value, 'EX', duration, (err) => {\n        if (err) reject(err);\n        resolve();\n      });\n    });\n  }\n\n  async del(key) {\n    return new Promise((resolve, reject) => {\n      this.client.del(key, (err) => {\n        if (err) reject(err);\n        resolve();\n      });\n    });\n  }\n}\n\nconst redisClient = new RedisClient();\nexport default redisClient;\n"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AAEA,MAAMC,WAAW,CAAC;EAChBC,WAAWA,CAAA,EAAG;IACZ,IAAI,CAACC,MAAM,GAAG,IAAAC,mBAAY,EAAC,CAAC;IAC5B,IAAI,CAACD,MAAM,CAACE,EAAE,CAAC,OAAO,EAAGC,GAAG,IAAKC,OAAO,CAACC,KAAK,CAAC,qBAAqB,EAAEF,GAAG,CAAC,CAAC;IAC3E,IAAI,CAACG,SAAS,GAAG,KAAK;IAEtB,IAAI,CAACN,MAAM,CAACE,EAAE,CAAC,SAAS,EAAE,MAAM;MAC9BE,OAAO,CAACG,GAAG,CAAC,wBAAwB,CAAC;MACrC,IAAI,CAACD,SAAS,GAAG,IAAI;IACvB,CAAC,CAAC;EACJ;EAEAE,OAAOA,CAAA,EAAG;IACR,OAAO,IAAI,CAACF,SAAS;EACvB;EAEA,MAAMG,GAAGA,CAACC,GAAG,EAAE;IACb,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;MACtC,IAAI,CAACb,MAAM,CAACS,GAAG,CAACC,GAAG,EAAE,CAACP,GAAG,EAAEW,KAAK,KAAK;QACnC,IAAIX,GAAG,EAAEU,MAAM,CAACV,GAAG,CAAC;QACpBS,OAAO,CAACE,KAAK,CAAC;MAChB,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ;EAEA,MAAMC,GAAGA,CAACL,GAAG,EAAEI,KAAK,EAAEE,QAAQ,EAAE;IAC9B,OAAO,IAAIL,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;MACtC,IAAI,CAACb,MAAM,CAACe,GAAG,CAACL,GAAG,EAAEI,KAAK,EAAE,IAAI,EAAEE,QAAQ,EAAGb,GAAG,IAAK;QACnD,IAAIA,GAAG,EAAEU,MAAM,CAACV,GAAG,CAAC;QACpBS,OAAO,CAAC,CAAC;MACX,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ;EAEA,MAAMK,GAAGA,CAACP,GAAG,EAAE;IACb,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;MACtC,IAAI,CAACb,MAAM,CAACiB,GAAG,CAACP,GAAG,EAAGP,GAAG,IAAK;QAC5B,IAAIA,GAAG,EAAEU,MAAM,CAACV,GAAG,CAAC;QACpBS,OAAO,CAAC,CAAC;MACX,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ;AACF;AAEA,MAAMM,WAAW,GAAG,IAAIpB,WAAW,CAAC,CAAC;AAAC,IAAAqB,QAAA,GAAAC,OAAA,CAAAC,OAAA,GACvBH,WAAW","ignoreList":[]}},"mtime":1733562510091},"{\"assumptions\":{},\"sourceRoot\":\"/alx-files_manager/controllers/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/alx-files_manager\",\"filename\":\"/alx-files_manager/controllers/UsersController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/alx-files_manager\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$3\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$4\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$5\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$12\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$16\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$17\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _db = _interopRequireDefault(require(\"../utils/db.js\"));\nvar _redis = _interopRequireDefault(require(\"../utils/redis.js\"));\nvar _sha = _interopRequireDefault(require(\"sha1\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\n// controllers/UsersController.js\n\nclass UsersController {\n  static async postNew(req, res) {\n    const {\n      email,\n      password\n    } = req.body;\n    if (!email) {\n      return res.status(400).json({\n        error: 'Missing email'\n      });\n    }\n    if (!password) {\n      return res.status(400).json({\n        error: 'Missing password'\n      });\n    }\n    const userExists = await _db.default.db.collection('users').findOne({\n      email\n    });\n    if (userExists) {\n      return res.status(400).json({\n        error: 'Already exist'\n      });\n    }\n    const hashedPassword = (0, _sha.default)(password);\n    const newUser = {\n      email,\n      password: hashedPassword\n    };\n    await _db.default.db.collection('users').insertOne(newUser);\n    return res.status(201).json({\n      id: newUser._id,\n      email: newUser.email\n    });\n  }\n  static async getMe(req, res) {\n    const token = req.headers['x-token'];\n    if (!token) {\n      return res.status(401).json({\n        error: 'Unauthorized'\n      });\n    }\n    const userId = await _redis.default.get(`auth_${token}`);\n    if (!userId) {\n      return res.status(401).json({\n        error: 'Unauthorized'\n      });\n    }\n    const user = await _db.default.db.collection('users').findOne({\n      _id: new ObjectId(userId)\n    });\n    if (!user) {\n      return res.status(401).json({\n        error: 'Unauthorized'\n      });\n    }\n    return res.status(200).json({\n      id: user._id,\n      email: user.email\n    });\n  }\n}\nvar _default = exports.default = UsersController;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZGIiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9yZWRpcyIsIl9zaGEiLCJlIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJVc2Vyc0NvbnRyb2xsZXIiLCJwb3N0TmV3IiwicmVxIiwicmVzIiwiZW1haWwiLCJwYXNzd29yZCIsImJvZHkiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJ1c2VyRXhpc3RzIiwiZGJDbGllbnQiLCJkYiIsImNvbGxlY3Rpb24iLCJmaW5kT25lIiwiaGFzaGVkUGFzc3dvcmQiLCJzaGExIiwibmV3VXNlciIsImluc2VydE9uZSIsImlkIiwiX2lkIiwiZ2V0TWUiLCJ0b2tlbiIsImhlYWRlcnMiLCJ1c2VySWQiLCJyZWRpc0NsaWVudCIsImdldCIsInVzZXIiLCJPYmplY3RJZCIsIl9kZWZhdWx0IiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL2FseC1maWxlc19tYW5hZ2VyL2NvbnRyb2xsZXJzLyIsInNvdXJjZXMiOlsiVXNlcnNDb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGNvbnRyb2xsZXJzL1VzZXJzQ29udHJvbGxlci5qc1xuaW1wb3J0IGRiQ2xpZW50IGZyb20gJy4uL3V0aWxzL2RiLmpzJztcbmltcG9ydCByZWRpc0NsaWVudCBmcm9tICcuLi91dGlscy9yZWRpcy5qcyc7XG5pbXBvcnQgc2hhMSBmcm9tICdzaGExJztcblxuY2xhc3MgVXNlcnNDb250cm9sbGVyIHtcbiAgc3RhdGljIGFzeW5jIHBvc3ROZXcocmVxLCByZXMpIHtcbiAgICBjb25zdCB7IGVtYWlsLCBwYXNzd29yZCB9ID0gcmVxLmJvZHk7XG5cbiAgICBpZiAoIWVtYWlsKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ01pc3NpbmcgZW1haWwnIH0pO1xuICAgIH1cbiAgICBpZiAoIXBhc3N3b3JkKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ01pc3NpbmcgcGFzc3dvcmQnIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHVzZXJFeGlzdHMgPSBhd2FpdCBkYkNsaWVudC5kYi5jb2xsZWN0aW9uKCd1c2VycycpLmZpbmRPbmUoeyBlbWFpbCB9KTtcbiAgICBpZiAodXNlckV4aXN0cykge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdBbHJlYWR5IGV4aXN0JyB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBoYXNoZWRQYXNzd29yZCA9IHNoYTEocGFzc3dvcmQpO1xuICAgIGNvbnN0IG5ld1VzZXIgPSB7IGVtYWlsLCBwYXNzd29yZDogaGFzaGVkUGFzc3dvcmQgfTtcbiAgICBhd2FpdCBkYkNsaWVudC5kYi5jb2xsZWN0aW9uKCd1c2VycycpLmluc2VydE9uZShuZXdVc2VyKTtcblxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMSkuanNvbih7IGlkOiBuZXdVc2VyLl9pZCwgZW1haWw6IG5ld1VzZXIuZW1haWwgfSk7XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZ2V0TWUocmVxLCByZXMpIHtcbiAgICBjb25zdCB0b2tlbiA9IHJlcS5oZWFkZXJzWyd4LXRva2VuJ107XG5cbiAgICBpZiAoIXRva2VuKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgdXNlcklkID0gYXdhaXQgcmVkaXNDbGllbnQuZ2V0KGBhdXRoXyR7dG9rZW59YCk7XG5cbiAgICBpZiAoIXVzZXJJZCkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBkYkNsaWVudC5kYi5jb2xsZWN0aW9uKCd1c2VycycpLmZpbmRPbmUoeyBfaWQ6IG5ldyBPYmplY3RJZCh1c2VySWQpIH0pO1xuXG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgaWQ6IHVzZXIuX2lkLCBlbWFpbDogdXNlci5lbWFpbCB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBVc2Vyc0NvbnRyb2xsZXI7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUNBLElBQUFBLEdBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLE1BQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFFLElBQUEsR0FBQUgsc0JBQUEsQ0FBQUMsT0FBQTtBQUF3QixTQUFBRCx1QkFBQUksQ0FBQSxXQUFBQSxDQUFBLElBQUFBLENBQUEsQ0FBQUMsVUFBQSxHQUFBRCxDQUFBLEtBQUFFLE9BQUEsRUFBQUYsQ0FBQTtBQUh4Qjs7QUFLQSxNQUFNRyxlQUFlLENBQUM7RUFDcEIsYUFBYUMsT0FBT0EsQ0FBQ0MsR0FBRyxFQUFFQyxHQUFHLEVBQUU7SUFDN0IsTUFBTTtNQUFFQyxLQUFLO01BQUVDO0lBQVMsQ0FBQyxHQUFHSCxHQUFHLENBQUNJLElBQUk7SUFFcEMsSUFBSSxDQUFDRixLQUFLLEVBQUU7TUFDVixPQUFPRCxHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQUVDLEtBQUssRUFBRTtNQUFnQixDQUFDLENBQUM7SUFDekQ7SUFDQSxJQUFJLENBQUNKLFFBQVEsRUFBRTtNQUNiLE9BQU9GLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFBRUMsS0FBSyxFQUFFO01BQW1CLENBQUMsQ0FBQztJQUM1RDtJQUVBLE1BQU1DLFVBQVUsR0FBRyxNQUFNQyxXQUFRLENBQUNDLEVBQUUsQ0FBQ0MsVUFBVSxDQUFDLE9BQU8sQ0FBQyxDQUFDQyxPQUFPLENBQUM7TUFBRVY7SUFBTSxDQUFDLENBQUM7SUFDM0UsSUFBSU0sVUFBVSxFQUFFO01BQ2QsT0FBT1AsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUFFQyxLQUFLLEVBQUU7TUFBZ0IsQ0FBQyxDQUFDO0lBQ3pEO0lBRUEsTUFBTU0sY0FBYyxHQUFHLElBQUFDLFlBQUksRUFBQ1gsUUFBUSxDQUFDO0lBQ3JDLE1BQU1ZLE9BQU8sR0FBRztNQUFFYixLQUFLO01BQUVDLFFBQVEsRUFBRVU7SUFBZSxDQUFDO0lBQ25ELE1BQU1KLFdBQVEsQ0FBQ0MsRUFBRSxDQUFDQyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUNLLFNBQVMsQ0FBQ0QsT0FBTyxDQUFDO0lBRXhELE9BQU9kLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFBRVcsRUFBRSxFQUFFRixPQUFPLENBQUNHLEdBQUc7TUFBRWhCLEtBQUssRUFBRWEsT0FBTyxDQUFDYjtJQUFNLENBQUMsQ0FBQztFQUN4RTtFQUVBLGFBQWFpQixLQUFLQSxDQUFDbkIsR0FBRyxFQUFFQyxHQUFHLEVBQUU7SUFDM0IsTUFBTW1CLEtBQUssR0FBR3BCLEdBQUcsQ0FBQ3FCLE9BQU8sQ0FBQyxTQUFTLENBQUM7SUFFcEMsSUFBSSxDQUFDRCxLQUFLLEVBQUU7TUFDVixPQUFPbkIsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUFFQyxLQUFLLEVBQUU7TUFBZSxDQUFDLENBQUM7SUFDeEQ7SUFFQSxNQUFNZSxNQUFNLEdBQUcsTUFBTUMsY0FBVyxDQUFDQyxHQUFHLENBQUMsUUFBUUosS0FBSyxFQUFFLENBQUM7SUFFckQsSUFBSSxDQUFDRSxNQUFNLEVBQUU7TUFDWCxPQUFPckIsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUFFQyxLQUFLLEVBQUU7TUFBZSxDQUFDLENBQUM7SUFDeEQ7SUFFQSxNQUFNa0IsSUFBSSxHQUFHLE1BQU1oQixXQUFRLENBQUNDLEVBQUUsQ0FBQ0MsVUFBVSxDQUFDLE9BQU8sQ0FBQyxDQUFDQyxPQUFPLENBQUM7TUFBRU0sR0FBRyxFQUFFLElBQUlRLFFBQVEsQ0FBQ0osTUFBTTtJQUFFLENBQUMsQ0FBQztJQUV6RixJQUFJLENBQUNHLElBQUksRUFBRTtNQUNULE9BQU94QixHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQUVDLEtBQUssRUFBRTtNQUFlLENBQUMsQ0FBQztJQUN4RDtJQUVBLE9BQU9OLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFBRVcsRUFBRSxFQUFFUSxJQUFJLENBQUNQLEdBQUc7TUFBRWhCLEtBQUssRUFBRXVCLElBQUksQ0FBQ3ZCO0lBQU0sQ0FBQyxDQUFDO0VBQ2xFO0FBQ0Y7QUFBQyxJQUFBeUIsUUFBQSxHQUFBQyxPQUFBLENBQUEvQixPQUFBLEdBRWNDLGVBQWUiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["_db","_interopRequireDefault","require","_redis","_sha","e","__esModule","default","UsersController","postNew","req","res","email","password","body","status","json","error","userExists","dbClient","db","collection","findOne","hashedPassword","sha1","newUser","insertOne","id","_id","getMe","token","headers","userId","redisClient","get","user","ObjectId","_default","exports"],"sourceRoot":"/alx-files_manager/controllers/","sources":["UsersController.js"],"sourcesContent":["// controllers/UsersController.js\nimport dbClient from '../utils/db.js';\nimport redisClient from '../utils/redis.js';\nimport sha1 from 'sha1';\n\nclass UsersController {\n  static async postNew(req, res) {\n    const { email, password } = req.body;\n\n    if (!email) {\n      return res.status(400).json({ error: 'Missing email' });\n    }\n    if (!password) {\n      return res.status(400).json({ error: 'Missing password' });\n    }\n\n    const userExists = await dbClient.db.collection('users').findOne({ email });\n    if (userExists) {\n      return res.status(400).json({ error: 'Already exist' });\n    }\n\n    const hashedPassword = sha1(password);\n    const newUser = { email, password: hashedPassword };\n    await dbClient.db.collection('users').insertOne(newUser);\n\n    return res.status(201).json({ id: newUser._id, email: newUser.email });\n  }\n\n  static async getMe(req, res) {\n    const token = req.headers['x-token'];\n\n    if (!token) {\n      return res.status(401).json({ error: 'Unauthorized' });\n    }\n\n    const userId = await redisClient.get(`auth_${token}`);\n\n    if (!userId) {\n      return res.status(401).json({ error: 'Unauthorized' });\n    }\n\n    const user = await dbClient.db.collection('users').findOne({ _id: new ObjectId(userId) });\n\n    if (!user) {\n      return res.status(401).json({ error: 'Unauthorized' });\n    }\n\n    return res.status(200).json({ id: user._id, email: user.email });\n  }\n}\n\nexport default UsersController;\n"],"mappings":"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","ignoreList":[]}},"mtime":1733566790524},"{\"assumptions\":{},\"sourceRoot\":\"/alx-files_manager/controllers/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/alx-files_manager\",\"filename\":\"/alx-files_manager/controllers/AuthController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/alx-files_manager\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$3\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$4\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$5\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$12\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$16\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$17\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _uuid = require(\"uuid\");\nvar _sha = _interopRequireDefault(require(\"sha1\"));\nvar _redis = _interopRequireDefault(require(\"../utils/redis.js\"));\nvar _db = _interopRequireDefault(require(\"../utils/db.js\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\n// controllers/AuthController.js\n\nclass AuthController {\n  static async getConnect(req, res) {\n    const authHeader = req.headers.authorization;\n    if (!authHeader || !authHeader.startsWith('Basic ')) {\n      return res.status(401).json({\n        error: 'Unauthorized'\n      });\n    }\n    const base64Credentials = authHeader.split(' ')[1];\n    const credentials = Buffer.from(base64Credentials, 'base64').toString('ascii');\n    const [email, password] = credentials.split(':');\n    const hashedPassword = (0, _sha.default)(password);\n    const user = await _db.default.db.collection('users').findOne({\n      email,\n      password: hashedPassword\n    });\n    if (!user) {\n      return res.status(401).json({\n        error: 'Unauthorized'\n      });\n    }\n    const token = (0, _uuid.v4)();\n    const key = `auth_${token}`;\n    await _redis.default.set(key, user._id.toString(), 86400); // Store for 24 hours\n\n    return res.status(200).json({\n      token\n    });\n  }\n  static async getDisconnect(req, res) {\n    const token = req.headers['x-token'];\n    if (!token) {\n      return res.status(401).json({\n        error: 'Unauthorized'\n      });\n    }\n    const key = `auth_${token}`;\n    const userId = await _redis.default.get(key);\n    if (!userId) {\n      return res.status(401).json({\n        error: 'Unauthorized'\n      });\n    }\n    await _redis.default.del(key);\n    return res.status(204).send();\n  }\n}\nvar _default = exports.default = AuthController;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfdXVpZCIsInJlcXVpcmUiLCJfc2hhIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIl9yZWRpcyIsIl9kYiIsImUiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIkF1dGhDb250cm9sbGVyIiwiZ2V0Q29ubmVjdCIsInJlcSIsInJlcyIsImF1dGhIZWFkZXIiLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsInN0YXJ0c1dpdGgiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJiYXNlNjRDcmVkZW50aWFscyIsInNwbGl0IiwiY3JlZGVudGlhbHMiLCJCdWZmZXIiLCJmcm9tIiwidG9TdHJpbmciLCJlbWFpbCIsInBhc3N3b3JkIiwiaGFzaGVkUGFzc3dvcmQiLCJzaGExIiwidXNlciIsImRiQ2xpZW50IiwiZGIiLCJjb2xsZWN0aW9uIiwiZmluZE9uZSIsInRva2VuIiwidXVpZHY0Iiwia2V5IiwicmVkaXNDbGllbnQiLCJzZXQiLCJfaWQiLCJnZXREaXNjb25uZWN0IiwidXNlcklkIiwiZ2V0IiwiZGVsIiwic2VuZCIsIl9kZWZhdWx0IiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL2FseC1maWxlc19tYW5hZ2VyL2NvbnRyb2xsZXJzLyIsInNvdXJjZXMiOlsiQXV0aENvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gY29udHJvbGxlcnMvQXV0aENvbnRyb2xsZXIuanNcbmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gJ3V1aWQnO1xuaW1wb3J0IHNoYTEgZnJvbSAnc2hhMSc7XG5pbXBvcnQgcmVkaXNDbGllbnQgZnJvbSAnLi4vdXRpbHMvcmVkaXMuanMnO1xuaW1wb3J0IGRiQ2xpZW50IGZyb20gJy4uL3V0aWxzL2RiLmpzJztcblxuY2xhc3MgQXV0aENvbnRyb2xsZXIge1xuICBzdGF0aWMgYXN5bmMgZ2V0Q29ubmVjdChyZXEsIHJlcykge1xuICAgIGNvbnN0IGF1dGhIZWFkZXIgPSByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uO1xuXG4gICAgaWYgKCFhdXRoSGVhZGVyIHx8ICFhdXRoSGVhZGVyLnN0YXJ0c1dpdGgoJ0Jhc2ljICcpKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgYmFzZTY0Q3JlZGVudGlhbHMgPSBhdXRoSGVhZGVyLnNwbGl0KCcgJylbMV07XG4gICAgY29uc3QgY3JlZGVudGlhbHMgPSBCdWZmZXIuZnJvbShiYXNlNjRDcmVkZW50aWFscywgJ2Jhc2U2NCcpLnRvU3RyaW5nKCdhc2NpaScpO1xuICAgIGNvbnN0IFtlbWFpbCwgcGFzc3dvcmRdID0gY3JlZGVudGlhbHMuc3BsaXQoJzonKTtcblxuICAgIGNvbnN0IGhhc2hlZFBhc3N3b3JkID0gc2hhMShwYXNzd29yZCk7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IGRiQ2xpZW50LmRiLmNvbGxlY3Rpb24oJ3VzZXJzJykuZmluZE9uZSh7IGVtYWlsLCBwYXNzd29yZDogaGFzaGVkUGFzc3dvcmQgfSk7XG5cbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICB9XG5cbiAgICBjb25zdCB0b2tlbiA9IHV1aWR2NCgpO1xuICAgIGNvbnN0IGtleSA9IGBhdXRoXyR7dG9rZW59YDtcbiAgICBhd2FpdCByZWRpc0NsaWVudC5zZXQoa2V5LCB1c2VyLl9pZC50b1N0cmluZygpLCA4NjQwMCk7IC8vIFN0b3JlIGZvciAyNCBob3Vyc1xuXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgdG9rZW4gfSk7XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZ2V0RGlzY29ubmVjdChyZXEsIHJlcykge1xuICAgIGNvbnN0IHRva2VuID0gcmVxLmhlYWRlcnNbJ3gtdG9rZW4nXTtcblxuICAgIGlmICghdG9rZW4pIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBrZXkgPSBgYXV0aF8ke3Rva2VufWA7XG4gICAgY29uc3QgdXNlcklkID0gYXdhaXQgcmVkaXNDbGllbnQuZ2V0KGtleSk7XG5cbiAgICBpZiAoIXVzZXJJZCkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgIH1cblxuICAgIGF3YWl0IHJlZGlzQ2xpZW50LmRlbChrZXkpO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDIwNCkuc2VuZCgpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEF1dGhDb250cm9sbGVyO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFDQSxJQUFBQSxLQUFBLEdBQUFDLE9BQUE7QUFDQSxJQUFBQyxJQUFBLEdBQUFDLHNCQUFBLENBQUFGLE9BQUE7QUFDQSxJQUFBRyxNQUFBLEdBQUFELHNCQUFBLENBQUFGLE9BQUE7QUFDQSxJQUFBSSxHQUFBLEdBQUFGLHNCQUFBLENBQUFGLE9BQUE7QUFBc0MsU0FBQUUsdUJBQUFHLENBQUEsV0FBQUEsQ0FBQSxJQUFBQSxDQUFBLENBQUFDLFVBQUEsR0FBQUQsQ0FBQSxLQUFBRSxPQUFBLEVBQUFGLENBQUE7QUFKdEM7O0FBTUEsTUFBTUcsY0FBYyxDQUFDO0VBQ25CLGFBQWFDLFVBQVVBLENBQUNDLEdBQUcsRUFBRUMsR0FBRyxFQUFFO0lBQ2hDLE1BQU1DLFVBQVUsR0FBR0YsR0FBRyxDQUFDRyxPQUFPLENBQUNDLGFBQWE7SUFFNUMsSUFBSSxDQUFDRixVQUFVLElBQUksQ0FBQ0EsVUFBVSxDQUFDRyxVQUFVLENBQUMsUUFBUSxDQUFDLEVBQUU7TUFDbkQsT0FBT0osR0FBRyxDQUFDSyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUFFQyxLQUFLLEVBQUU7TUFBZSxDQUFDLENBQUM7SUFDeEQ7SUFFQSxNQUFNQyxpQkFBaUIsR0FBR1AsVUFBVSxDQUFDUSxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2xELE1BQU1DLFdBQVcsR0FBR0MsTUFBTSxDQUFDQyxJQUFJLENBQUNKLGlCQUFpQixFQUFFLFFBQVEsQ0FBQyxDQUFDSyxRQUFRLENBQUMsT0FBTyxDQUFDO0lBQzlFLE1BQU0sQ0FBQ0MsS0FBSyxFQUFFQyxRQUFRLENBQUMsR0FBR0wsV0FBVyxDQUFDRCxLQUFLLENBQUMsR0FBRyxDQUFDO0lBRWhELE1BQU1PLGNBQWMsR0FBRyxJQUFBQyxZQUFJLEVBQUNGLFFBQVEsQ0FBQztJQUNyQyxNQUFNRyxJQUFJLEdBQUcsTUFBTUMsV0FBUSxDQUFDQyxFQUFFLENBQUNDLFVBQVUsQ0FBQyxPQUFPLENBQUMsQ0FBQ0MsT0FBTyxDQUFDO01BQUVSLEtBQUs7TUFBRUMsUUFBUSxFQUFFQztJQUFlLENBQUMsQ0FBQztJQUUvRixJQUFJLENBQUNFLElBQUksRUFBRTtNQUNULE9BQU9sQixHQUFHLENBQUNLLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQUVDLEtBQUssRUFBRTtNQUFlLENBQUMsQ0FBQztJQUN4RDtJQUVBLE1BQU1nQixLQUFLLEdBQUcsSUFBQUMsUUFBTSxFQUFDLENBQUM7SUFDdEIsTUFBTUMsR0FBRyxHQUFHLFFBQVFGLEtBQUssRUFBRTtJQUMzQixNQUFNRyxjQUFXLENBQUNDLEdBQUcsQ0FBQ0YsR0FBRyxFQUFFUCxJQUFJLENBQUNVLEdBQUcsQ0FBQ2YsUUFBUSxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDOztJQUV4RCxPQUFPYixHQUFHLENBQUNLLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQUVpQjtJQUFNLENBQUMsQ0FBQztFQUN4QztFQUVBLGFBQWFNLGFBQWFBLENBQUM5QixHQUFHLEVBQUVDLEdBQUcsRUFBRTtJQUNuQyxNQUFNdUIsS0FBSyxHQUFHeEIsR0FBRyxDQUFDRyxPQUFPLENBQUMsU0FBUyxDQUFDO0lBRXBDLElBQUksQ0FBQ3FCLEtBQUssRUFBRTtNQUNWLE9BQU92QixHQUFHLENBQUNLLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1FBQUVDLEtBQUssRUFBRTtNQUFlLENBQUMsQ0FBQztJQUN4RDtJQUVBLE1BQU1rQixHQUFHLEdBQUcsUUFBUUYsS0FBSyxFQUFFO0lBQzNCLE1BQU1PLE1BQU0sR0FBRyxNQUFNSixjQUFXLENBQUNLLEdBQUcsQ0FBQ04sR0FBRyxDQUFDO0lBRXpDLElBQUksQ0FBQ0ssTUFBTSxFQUFFO01BQ1gsT0FBTzlCLEdBQUcsQ0FBQ0ssTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFBRUMsS0FBSyxFQUFFO01BQWUsQ0FBQyxDQUFDO0lBQ3hEO0lBRUEsTUFBTW1CLGNBQVcsQ0FBQ00sR0FBRyxDQUFDUCxHQUFHLENBQUM7SUFDMUIsT0FBT3pCLEdBQUcsQ0FBQ0ssTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDNEIsSUFBSSxDQUFDLENBQUM7RUFDL0I7QUFDRjtBQUFDLElBQUFDLFFBQUEsR0FBQUMsT0FBQSxDQUFBdkMsT0FBQSxHQUVjQyxjQUFjIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["_uuid","require","_sha","_interopRequireDefault","_redis","_db","e","__esModule","default","AuthController","getConnect","req","res","authHeader","headers","authorization","startsWith","status","json","error","base64Credentials","split","credentials","Buffer","from","toString","email","password","hashedPassword","sha1","user","dbClient","db","collection","findOne","token","uuidv4","key","redisClient","set","_id","getDisconnect","userId","get","del","send","_default","exports"],"sourceRoot":"/alx-files_manager/controllers/","sources":["AuthController.js"],"sourcesContent":["// controllers/AuthController.js\nimport { v4 as uuidv4 } from 'uuid';\nimport sha1 from 'sha1';\nimport redisClient from '../utils/redis.js';\nimport dbClient from '../utils/db.js';\n\nclass AuthController {\n  static async getConnect(req, res) {\n    const authHeader = req.headers.authorization;\n\n    if (!authHeader || !authHeader.startsWith('Basic ')) {\n      return res.status(401).json({ error: 'Unauthorized' });\n    }\n\n    const base64Credentials = authHeader.split(' ')[1];\n    const credentials = Buffer.from(base64Credentials, 'base64').toString('ascii');\n    const [email, password] = credentials.split(':');\n\n    const hashedPassword = sha1(password);\n    const user = await dbClient.db.collection('users').findOne({ email, password: hashedPassword });\n\n    if (!user) {\n      return res.status(401).json({ error: 'Unauthorized' });\n    }\n\n    const token = uuidv4();\n    const key = `auth_${token}`;\n    await redisClient.set(key, user._id.toString(), 86400); // Store for 24 hours\n\n    return res.status(200).json({ token });\n  }\n\n  static async getDisconnect(req, res) {\n    const token = req.headers['x-token'];\n\n    if (!token) {\n      return res.status(401).json({ error: 'Unauthorized' });\n    }\n\n    const key = `auth_${token}`;\n    const userId = await redisClient.get(key);\n\n    if (!userId) {\n      return res.status(401).json({ error: 'Unauthorized' });\n    }\n\n    await redisClient.del(key);\n    return res.status(204).send();\n  }\n}\n\nexport default AuthController;\n"],"mappings":";;;;;;AACA,IAAAA,KAAA,GAAAC,OAAA;AACA,IAAAC,IAAA,GAAAC,sBAAA,CAAAF,OAAA;AACA,IAAAG,MAAA,GAAAD,sBAAA,CAAAF,OAAA;AACA,IAAAI,GAAA,GAAAF,sBAAA,CAAAF,OAAA;AAAsC,SAAAE,uBAAAG,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAJtC;;AAMA,MAAMG,cAAc,CAAC;EACnB,aAAaC,UAAUA,CAACC,GAAG,EAAEC,GAAG,EAAE;IAChC,MAAMC,UAAU,GAAGF,GAAG,CAACG,OAAO,CAACC,aAAa;IAE5C,IAAI,CAACF,UAAU,IAAI,CAACA,UAAU,CAACG,UAAU,CAAC,QAAQ,CAAC,EAAE;MACnD,OAAOJ,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,KAAK,EAAE;MAAe,CAAC,CAAC;IACxD;IAEA,MAAMC,iBAAiB,GAAGP,UAAU,CAACQ,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IAClD,MAAMC,WAAW,GAAGC,MAAM,CAACC,IAAI,CAACJ,iBAAiB,EAAE,QAAQ,CAAC,CAACK,QAAQ,CAAC,OAAO,CAAC;IAC9E,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGL,WAAW,CAACD,KAAK,CAAC,GAAG,CAAC;IAEhD,MAAMO,cAAc,GAAG,IAAAC,YAAI,EAACF,QAAQ,CAAC;IACrC,MAAMG,IAAI,GAAG,MAAMC,WAAQ,CAACC,EAAE,CAACC,UAAU,CAAC,OAAO,CAAC,CAACC,OAAO,CAAC;MAAER,KAAK;MAAEC,QAAQ,EAAEC;IAAe,CAAC,CAAC;IAE/F,IAAI,CAACE,IAAI,EAAE;MACT,OAAOlB,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,KAAK,EAAE;MAAe,CAAC,CAAC;IACxD;IAEA,MAAMgB,KAAK,GAAG,IAAAC,QAAM,EAAC,CAAC;IACtB,MAAMC,GAAG,GAAG,QAAQF,KAAK,EAAE;IAC3B,MAAMG,cAAW,CAACC,GAAG,CAACF,GAAG,EAAEP,IAAI,CAACU,GAAG,CAACf,QAAQ,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC;;IAExD,OAAOb,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEiB;IAAM,CAAC,CAAC;EACxC;EAEA,aAAaM,aAAaA,CAAC9B,GAAG,EAAEC,GAAG,EAAE;IACnC,MAAMuB,KAAK,GAAGxB,GAAG,CAACG,OAAO,CAAC,SAAS,CAAC;IAEpC,IAAI,CAACqB,KAAK,EAAE;MACV,OAAOvB,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,KAAK,EAAE;MAAe,CAAC,CAAC;IACxD;IAEA,MAAMkB,GAAG,GAAG,QAAQF,KAAK,EAAE;IAC3B,MAAMO,MAAM,GAAG,MAAMJ,cAAW,CAACK,GAAG,CAACN,GAAG,CAAC;IAEzC,IAAI,CAACK,MAAM,EAAE;MACX,OAAO9B,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,KAAK,EAAE;MAAe,CAAC,CAAC;IACxD;IAEA,MAAMmB,cAAW,CAACM,GAAG,CAACP,GAAG,CAAC;IAC1B,OAAOzB,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAAC4B,IAAI,CAAC,CAAC;EAC/B;AACF;AAAC,IAAAC,QAAA,GAAAC,OAAA,CAAAvC,OAAA,GAEcC,cAAc","ignoreList":[]}},"mtime":1733566692596},"{\"assumptions\":{},\"sourceRoot\":\"/alx-files_manager/controllers/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/alx-files_manager\",\"filename\":\"/alx-files_manager/controllers/FilesController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/alx-files_manager\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$3\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$4\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$5\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$12\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$16\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/alx-files_manager/node_modules/@babel/preset-env/lib/index.js$17\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.0:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _uuid = require(\"uuid\");\nvar _mongodb = require(\"mongodb\");\nvar _fs = _interopRequireDefault(require(\"fs\"));\nvar _path = _interopRequireDefault(require(\"path\"));\nvar _mimeTypes = _interopRequireDefault(require(\"mime-types\"));\nvar _db = _interopRequireDefault(require(\"../utils/db.js\"));\nvar _redis = _interopRequireDefault(require(\"../utils/redis.js\"));\nvar _bull = _interopRequireDefault(require(\"bull\"));\nvar _imageThumbnail = _interopRequireDefault(require(\"image-thumbnail\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\nconst FOLDER_PATH = process.env.FOLDER_PATH || '/tmp/files_manager';\nconst fileQueue = new _bull.default('fileQueue');\nclass FilesController {\n  static async postUpload(req, res) {\n    const token = req.headers['x-token'];\n    const {\n      name,\n      type,\n      parentId = 0,\n      isPublic = false,\n      data\n    } = req.body;\n    if (!token) {\n      return res.status(401).json({\n        error: 'Unauthorized'\n      });\n    }\n    const userId = await _redis.default.get(`auth_${token}`);\n    if (!userId) {\n      return res.status(401).json({\n        error: 'Unauthorized'\n      });\n    }\n    if (!name) {\n      return res.status(400).json({\n        error: 'Missing name'\n      });\n    }\n    if (!type || !['folder', 'file', 'image'].includes(type)) {\n      return res.status(400).json({\n        error: 'Missing type'\n      });\n    }\n    if (type !== 'folder' && !data) {\n      return res.status(400).json({\n        error: 'Missing data'\n      });\n    }\n    const parentFile = parentId ? await _db.default.db.collection('files').findOne({\n      _id: (0, _mongodb.ObjectId)(parentId)\n    }) : null;\n    if (parentId && !parentFile) {\n      return res.status(400).json({\n        error: 'Parent not found'\n      });\n    }\n    if (parentFile && parentFile.type !== 'folder') {\n      return res.status(400).json({\n        error: 'Parent is not a folder'\n      });\n    }\n    const user = await _db.default.db.collection('users').findOne({\n      _id: (0, _mongodb.ObjectId)(userId)\n    });\n    if (!user) {\n      return res.status(401).json({\n        error: 'Unauthorized'\n      });\n    }\n    const fileDocument = {\n      userId: userId,\n      name: name,\n      type: type,\n      isPublic: isPublic,\n      parentId: parentId,\n      localPath: ''\n    };\n    if (type === 'folder') {\n      await _db.default.db.collection('files').insertOne(fileDocument);\n      return res.status(201).json(fileDocument);\n    }\n    const localPath = _path.default.join(FOLDER_PATH, (0, _uuid.v4)());\n    _fs.default.mkdirSync(FOLDER_PATH, {\n      recursive: true\n    });\n    _fs.default.writeFileSync(localPath, Buffer.from(data, 'base64'));\n    fileDocument.localPath = localPath;\n    const result = await _db.default.db.collection('files').insertOne(fileDocument);\n    const fileId = result.insertedId;\n\n    // Add job to queue for thumbnail generation\n    if (type === 'image') {\n      fileQueue.add({\n        userId,\n        fileId\n      });\n    }\n    return res.status(201).json(fileDocument);\n  }\n\n  // ... other methods\n\n  static async getFile(req, res) {\n    const token = req.headers['x-token'] || null;\n    const fileId = req.params.id;\n    const size = req.query.size;\n    const file = await _db.default.db.collection('files').findOne({\n      _id: (0, _mongodb.ObjectId)(fileId)\n    });\n    if (!file) {\n      return res.status(404).json({\n        error: 'Not found'\n      });\n    }\n    if (!file.isPublic && !token) {\n      return res.status(404).json({\n        error: 'Not found'\n      });\n    }\n    const userId = token ? await _redis.default.get(`auth_${token}`) : null;\n    if (!file.isPublic && (!userId || file.userId !== userId)) {\n      return res.status(404).json({\n        error: 'Not found'\n      });\n    }\n    if (file.type === 'folder') {\n      return res.status(400).json({\n        error: \"A folder doesn't have content\"\n      });\n    }\n    const localPath = size ? `${file.localPath}_${size}` : file.localPath;\n    if (!_fs.default.existsSync(localPath)) {\n      return res.status(404).json({\n        error: 'Not found'\n      });\n    }\n    const mimeType = _mimeTypes.default.lookup(file.name);\n    res.setHeader('Content-Type', mimeType);\n    const fileContent = _fs.default.readFileSync(localPath);\n    return res.status(200).send(fileContent);\n  }\n}\nvar _default = exports.default = FilesController;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfdXVpZCIsInJlcXVpcmUiLCJfbW9uZ29kYiIsIl9mcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfcGF0aCIsIl9taW1lVHlwZXMiLCJfZGIiLCJfcmVkaXMiLCJfYnVsbCIsIl9pbWFnZVRodW1ibmFpbCIsImUiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIkZPTERFUl9QQVRIIiwicHJvY2VzcyIsImVudiIsImZpbGVRdWV1ZSIsIlF1ZXVlIiwiRmlsZXNDb250cm9sbGVyIiwicG9zdFVwbG9hZCIsInJlcSIsInJlcyIsInRva2VuIiwiaGVhZGVycyIsIm5hbWUiLCJ0eXBlIiwicGFyZW50SWQiLCJpc1B1YmxpYyIsImRhdGEiLCJib2R5Iiwic3RhdHVzIiwianNvbiIsImVycm9yIiwidXNlcklkIiwicmVkaXNDbGllbnQiLCJnZXQiLCJpbmNsdWRlcyIsInBhcmVudEZpbGUiLCJkYkNsaWVudCIsImRiIiwiY29sbGVjdGlvbiIsImZpbmRPbmUiLCJfaWQiLCJPYmplY3RJZCIsInVzZXIiLCJmaWxlRG9jdW1lbnQiLCJsb2NhbFBhdGgiLCJpbnNlcnRPbmUiLCJwYXRoIiwiam9pbiIsInV1aWR2NCIsImZzIiwibWtkaXJTeW5jIiwicmVjdXJzaXZlIiwid3JpdGVGaWxlU3luYyIsIkJ1ZmZlciIsImZyb20iLCJyZXN1bHQiLCJmaWxlSWQiLCJpbnNlcnRlZElkIiwiYWRkIiwiZ2V0RmlsZSIsInBhcmFtcyIsImlkIiwic2l6ZSIsInF1ZXJ5IiwiZmlsZSIsImV4aXN0c1N5bmMiLCJtaW1lVHlwZSIsIm1pbWUiLCJsb29rdXAiLCJzZXRIZWFkZXIiLCJmaWxlQ29udGVudCIsInJlYWRGaWxlU3luYyIsInNlbmQiLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9hbHgtZmlsZXNfbWFuYWdlci9jb250cm9sbGVycy8iLCJzb3VyY2VzIjpbIkZpbGVzQ29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tICd1dWlkJztcbmltcG9ydCB7IE9iamVjdElkIH0gZnJvbSAnbW9uZ29kYic7XG5pbXBvcnQgZnMgZnJvbSAnZnMnO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgbWltZSBmcm9tICdtaW1lLXR5cGVzJztcbmltcG9ydCBkYkNsaWVudCBmcm9tICcuLi91dGlscy9kYi5qcyc7XG5pbXBvcnQgcmVkaXNDbGllbnQgZnJvbSAnLi4vdXRpbHMvcmVkaXMuanMnO1xuaW1wb3J0IFF1ZXVlIGZyb20gJ2J1bGwnO1xuaW1wb3J0IGltYWdlVGh1bWJuYWlsIGZyb20gJ2ltYWdlLXRodW1ibmFpbCc7XG5cbmNvbnN0IEZPTERFUl9QQVRIID0gcHJvY2Vzcy5lbnYuRk9MREVSX1BBVEggfHwgJy90bXAvZmlsZXNfbWFuYWdlcic7XG5jb25zdCBmaWxlUXVldWUgPSBuZXcgUXVldWUoJ2ZpbGVRdWV1ZScpO1xuXG5jbGFzcyBGaWxlc0NvbnRyb2xsZXIge1xuICBzdGF0aWMgYXN5bmMgcG9zdFVwbG9hZChyZXEsIHJlcykge1xuICAgIGNvbnN0IHRva2VuID0gcmVxLmhlYWRlcnNbJ3gtdG9rZW4nXTtcbiAgICBjb25zdCB7IG5hbWUsIHR5cGUsIHBhcmVudElkID0gMCwgaXNQdWJsaWMgPSBmYWxzZSwgZGF0YSB9ID0gcmVxLmJvZHk7XG5cbiAgICBpZiAoIXRva2VuKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgdXNlcklkID0gYXdhaXQgcmVkaXNDbGllbnQuZ2V0KGBhdXRoXyR7dG9rZW59YCk7XG4gICAgaWYgKCF1c2VySWQpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yOiAnVW5hdXRob3JpemVkJyB9KTtcbiAgICB9XG5cbiAgICBpZiAoIW5hbWUpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnTWlzc2luZyBuYW1lJyB9KTtcbiAgICB9XG5cbiAgICBpZiAoIXR5cGUgfHwgIVsnZm9sZGVyJywgJ2ZpbGUnLCAnaW1hZ2UnXS5pbmNsdWRlcyh0eXBlKSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdNaXNzaW5nIHR5cGUnIH0pO1xuICAgIH1cblxuICAgIGlmICh0eXBlICE9PSAnZm9sZGVyJyAmJiAhZGF0YSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdNaXNzaW5nIGRhdGEnIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHBhcmVudEZpbGUgPSBwYXJlbnRJZCA/IGF3YWl0IGRiQ2xpZW50LmRiLmNvbGxlY3Rpb24oJ2ZpbGVzJykuZmluZE9uZSh7IF9pZDogT2JqZWN0SWQocGFyZW50SWQpIH0pIDogbnVsbDtcblxuICAgIGlmIChwYXJlbnRJZCAmJiAhcGFyZW50RmlsZSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdQYXJlbnQgbm90IGZvdW5kJyB9KTtcbiAgICB9XG5cbiAgICBpZiAocGFyZW50RmlsZSAmJiBwYXJlbnRGaWxlLnR5cGUgIT09ICdmb2xkZXInKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ1BhcmVudCBpcyBub3QgYSBmb2xkZXInIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBkYkNsaWVudC5kYi5jb2xsZWN0aW9uKCd1c2VycycpLmZpbmRPbmUoeyBfaWQ6IE9iamVjdElkKHVzZXJJZCkgfSk7XG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgZmlsZURvY3VtZW50ID0ge1xuICAgICAgdXNlcklkOiB1c2VySWQsXG4gICAgICBuYW1lOiBuYW1lLFxuICAgICAgdHlwZTogdHlwZSxcbiAgICAgIGlzUHVibGljOiBpc1B1YmxpYyxcbiAgICAgIHBhcmVudElkOiBwYXJlbnRJZCxcbiAgICAgIGxvY2FsUGF0aDogJycsXG4gICAgfTtcblxuICAgIGlmICh0eXBlID09PSAnZm9sZGVyJykge1xuICAgICAgYXdhaXQgZGJDbGllbnQuZGIuY29sbGVjdGlvbignZmlsZXMnKS5pbnNlcnRPbmUoZmlsZURvY3VtZW50KTtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMSkuanNvbihmaWxlRG9jdW1lbnQpO1xuICAgIH1cblxuICAgIGNvbnN0IGxvY2FsUGF0aCA9IHBhdGguam9pbihGT0xERVJfUEFUSCwgdXVpZHY0KCkpO1xuICAgIGZzLm1rZGlyU3luYyhGT0xERVJfUEFUSCwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gICAgZnMud3JpdGVGaWxlU3luYyhsb2NhbFBhdGgsIEJ1ZmZlci5mcm9tKGRhdGEsICdiYXNlNjQnKSk7XG5cbiAgICBmaWxlRG9jdW1lbnQubG9jYWxQYXRoID0gbG9jYWxQYXRoO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiQ2xpZW50LmRiLmNvbGxlY3Rpb24oJ2ZpbGVzJykuaW5zZXJ0T25lKGZpbGVEb2N1bWVudCk7XG4gICAgY29uc3QgZmlsZUlkID0gcmVzdWx0Lmluc2VydGVkSWQ7XG5cbiAgICAvLyBBZGQgam9iIHRvIHF1ZXVlIGZvciB0aHVtYm5haWwgZ2VuZXJhdGlvblxuICAgIGlmICh0eXBlID09PSAnaW1hZ2UnKSB7XG4gICAgICBmaWxlUXVldWUuYWRkKHsgdXNlcklkLCBmaWxlSWQgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAxKS5qc29uKGZpbGVEb2N1bWVudCk7XG4gIH1cblxuICAvLyAuLi4gb3RoZXIgbWV0aG9kc1xuXG4gIHN0YXRpYyBhc3luYyBnZXRGaWxlKHJlcSwgcmVzKSB7XG4gICAgY29uc3QgdG9rZW4gPSByZXEuaGVhZGVyc1sneC10b2tlbiddIHx8IG51bGw7XG4gICAgY29uc3QgZmlsZUlkID0gcmVxLnBhcmFtcy5pZDtcbiAgICBjb25zdCBzaXplID0gcmVxLnF1ZXJ5LnNpemU7XG5cbiAgICBjb25zdCBmaWxlID0gYXdhaXQgZGJDbGllbnQuZGIuY29sbGVjdGlvbignZmlsZXMnKS5maW5kT25lKHsgX2lkOiBPYmplY3RJZChmaWxlSWQpIH0pO1xuICAgIGlmICghZmlsZSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdOb3QgZm91bmQnIH0pO1xuICAgIH1cblxuICAgIGlmICghZmlsZS5pc1B1YmxpYyAmJiAhdG9rZW4pIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnTm90IGZvdW5kJyB9KTtcbiAgICB9XG5cbiAgICBjb25zdCB1c2VySWQgPSB0b2tlbiA/IGF3YWl0IHJlZGlzQ2xpZW50LmdldChgYXV0aF8ke3Rva2VufWApIDogbnVsbDtcbiAgICBpZiAoIWZpbGUuaXNQdWJsaWMgJiYgKCF1c2VySWQgfHwgZmlsZS51c2VySWQgIT09IHVzZXJJZCkpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnTm90IGZvdW5kJyB9KTtcbiAgICB9XG5cbiAgICBpZiAoZmlsZS50eXBlID09PSAnZm9sZGVyJykge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6IFwiQSBmb2xkZXIgZG9lc24ndCBoYXZlIGNvbnRlbnRcIiB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBsb2NhbFBhdGggPSBzaXplID8gYCR7ZmlsZS5sb2NhbFBhdGh9XyR7c2l6ZX1gIDogZmlsZS5sb2NhbFBhdGg7XG4gICAgaWYgKCFmcy5leGlzdHNTeW5jKGxvY2FsUGF0aCkpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnTm90IGZvdW5kJyB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBtaW1lVHlwZSA9IG1pbWUubG9va3VwKGZpbGUubmFtZSk7XG4gICAgcmVzLnNldEhlYWRlcignQ29udGVudC1UeXBlJywgbWltZVR5cGUpO1xuICAgIGNvbnN0IGZpbGVDb250ZW50ID0gZnMucmVhZEZpbGVTeW5jKGxvY2FsUGF0aCk7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5zZW5kKGZpbGVDb250ZW50KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBGaWxlc0NvbnRyb2xsZXI7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLEtBQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLFFBQUEsR0FBQUQsT0FBQTtBQUNBLElBQUFFLEdBQUEsR0FBQUMsc0JBQUEsQ0FBQUgsT0FBQTtBQUNBLElBQUFJLEtBQUEsR0FBQUQsc0JBQUEsQ0FBQUgsT0FBQTtBQUNBLElBQUFLLFVBQUEsR0FBQUYsc0JBQUEsQ0FBQUgsT0FBQTtBQUNBLElBQUFNLEdBQUEsR0FBQUgsc0JBQUEsQ0FBQUgsT0FBQTtBQUNBLElBQUFPLE1BQUEsR0FBQUosc0JBQUEsQ0FBQUgsT0FBQTtBQUNBLElBQUFRLEtBQUEsR0FBQUwsc0JBQUEsQ0FBQUgsT0FBQTtBQUNBLElBQUFTLGVBQUEsR0FBQU4sc0JBQUEsQ0FBQUgsT0FBQTtBQUE2QyxTQUFBRyx1QkFBQU8sQ0FBQSxXQUFBQSxDQUFBLElBQUFBLENBQUEsQ0FBQUMsVUFBQSxHQUFBRCxDQUFBLEtBQUFFLE9BQUEsRUFBQUYsQ0FBQTtBQUU3QyxNQUFNRyxXQUFXLEdBQUdDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDRixXQUFXLElBQUksb0JBQW9CO0FBQ25FLE1BQU1HLFNBQVMsR0FBRyxJQUFJQyxhQUFLLENBQUMsV0FBVyxDQUFDO0FBRXhDLE1BQU1DLGVBQWUsQ0FBQztFQUNwQixhQUFhQyxVQUFVQSxDQUFDQyxHQUFHLEVBQUVDLEdBQUcsRUFBRTtJQUNoQyxNQUFNQyxLQUFLLEdBQUdGLEdBQUcsQ0FBQ0csT0FBTyxDQUFDLFNBQVMsQ0FBQztJQUNwQyxNQUFNO01B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","map":{"version":3,"names":["_uuid","require","_mongodb","_fs","_interopRequireDefault","_path","_mimeTypes","_db","_redis","_bull","_imageThumbnail","e","__esModule","default","FOLDER_PATH","process","env","fileQueue","Queue","FilesController","postUpload","req","res","token","headers","name","type","parentId","isPublic","data","body","status","json","error","userId","redisClient","get","includes","parentFile","dbClient","db","collection","findOne","_id","ObjectId","user","fileDocument","localPath","insertOne","path","join","uuidv4","fs","mkdirSync","recursive","writeFileSync","Buffer","from","result","fileId","insertedId","add","getFile","params","id","size","query","file","existsSync","mimeType","mime","lookup","setHeader","fileContent","readFileSync","send","_default","exports"],"sourceRoot":"/alx-files_manager/controllers/","sources":["FilesController.js"],"sourcesContent":["import { v4 as uuidv4 } from 'uuid';\nimport { ObjectId } from 'mongodb';\nimport fs from 'fs';\nimport path from 'path';\nimport mime from 'mime-types';\nimport dbClient from '../utils/db.js';\nimport redisClient from '../utils/redis.js';\nimport Queue from 'bull';\nimport imageThumbnail from 'image-thumbnail';\n\nconst FOLDER_PATH = process.env.FOLDER_PATH || '/tmp/files_manager';\nconst fileQueue = new Queue('fileQueue');\n\nclass FilesController {\n  static async postUpload(req, res) {\n    const token = req.headers['x-token'];\n    const { name, type, parentId = 0, isPublic = false, data } = req.body;\n\n    if (!token) {\n      return res.status(401).json({ error: 'Unauthorized' });\n    }\n\n    const userId = await redisClient.get(`auth_${token}`);\n    if (!userId) {\n      return res.status(401).json({ error: 'Unauthorized' });\n    }\n\n    if (!name) {\n      return res.status(400).json({ error: 'Missing name' });\n    }\n\n    if (!type || !['folder', 'file', 'image'].includes(type)) {\n      return res.status(400).json({ error: 'Missing type' });\n    }\n\n    if (type !== 'folder' && !data) {\n      return res.status(400).json({ error: 'Missing data' });\n    }\n\n    const parentFile = parentId ? await dbClient.db.collection('files').findOne({ _id: ObjectId(parentId) }) : null;\n\n    if (parentId && !parentFile) {\n      return res.status(400).json({ error: 'Parent not found' });\n    }\n\n    if (parentFile && parentFile.type !== 'folder') {\n      return res.status(400).json({ error: 'Parent is not a folder' });\n    }\n\n    const user = await dbClient.db.collection('users').findOne({ _id: ObjectId(userId) });\n    if (!user) {\n      return res.status(401).json({ error: 'Unauthorized' });\n    }\n\n    const fileDocument = {\n      userId: userId,\n      name: name,\n      type: type,\n      isPublic: isPublic,\n      parentId: parentId,\n      localPath: '',\n    };\n\n    if (type === 'folder') {\n      await dbClient.db.collection('files').insertOne(fileDocument);\n      return res.status(201).json(fileDocument);\n    }\n\n    const localPath = path.join(FOLDER_PATH, uuidv4());\n    fs.mkdirSync(FOLDER_PATH, { recursive: true });\n    fs.writeFileSync(localPath, Buffer.from(data, 'base64'));\n\n    fileDocument.localPath = localPath;\n    const result = await dbClient.db.collection('files').insertOne(fileDocument);\n    const fileId = result.insertedId;\n\n    // Add job to queue for thumbnail generation\n    if (type === 'image') {\n      fileQueue.add({ userId, fileId });\n    }\n\n    return res.status(201).json(fileDocument);\n  }\n\n  // ... other methods\n\n  static async getFile(req, res) {\n    const token = req.headers['x-token'] || null;\n    const fileId = req.params.id;\n    const size = req.query.size;\n\n    const file = await dbClient.db.collection('files').findOne({ _id: ObjectId(fileId) });\n    if (!file) {\n      return res.status(404).json({ error: 'Not found' });\n    }\n\n    if (!file.isPublic && !token) {\n      return res.status(404).json({ error: 'Not found' });\n    }\n\n    const userId = token ? await redisClient.get(`auth_${token}`) : null;\n    if (!file.isPublic && (!userId || file.userId !== userId)) {\n      return res.status(404).json({ error: 'Not found' });\n    }\n\n    if (file.type === 'folder') {\n      return res.status(400).json({ error: \"A folder doesn't have content\" });\n    }\n\n    const localPath = size ? `${file.localPath}_${size}` : file.localPath;\n    if (!fs.existsSync(localPath)) {\n      return res.status(404).json({ error: 'Not found' });\n    }\n\n    const mimeType = mime.lookup(file.name);\n    res.setHeader('Content-Type', mimeType);\n    const fileContent = fs.readFileSync(localPath);\n    return res.status(200).send(fileContent);\n  }\n}\n\nexport default FilesController;\n"],"mappings":"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","ignoreList":[]}},"mtime":1733727449857}}